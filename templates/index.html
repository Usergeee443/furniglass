{% extends "base.html" %}

{% block title %}{% if lang == 'ru' %}Furniglass - Премиум Мебель и Стекло в Узбекистане | Мebel, Furniglass{% elif lang == 'en' %}Furniglass - Premium Furniture & Glass in Uzbekistan | Mebel, Furniglass{% else %}Furniglass - Premium Mebel va Shisha Tashkilot | Mebel, Furniglass{% endif %}{% endblock %}

{% block meta_title %}{% if lang == 'ru' %}Furniglass - Премиум Мебель и Стекло | Мebel, Furniglass{% elif lang == 'en' %}Furniglass - Premium Furniture & Glass | Mebel, Furniglass{% else %}Furniglass - Premium Mebel va Shisha | Mebel, Furniglass{% endif %}{% endblock %}

{% block meta_description %}{% if lang == 'ru' %}Furniglass - ведущий производитель премиум мебели и стеклянных изделий в Узбекистане. Мebel, Furniglass - индивидуальный дизайн, 25 лет гарантии. Мебель для дома, кафе, ресторанов, клиник. Купить мебель в Ташкенте.{% elif lang == 'en' %}Furniglass - leading manufacturer of premium furniture and glass products in Uzbekistan. Mebel, Furniglass - custom design, 25 years warranty. Furniture for home, cafes, restaurants, clinics. Buy furniture in Tashkent.{% else %}Furniglass - O'zbekistondagi premium mebel va shisha mahsulotlar ishlab chiqaruvchi yetakchi kompaniya. Mebel, Furniglass - individual dizayn, 25 yillik kafolat. Uy, kafe, restoran, klinika uchun mebel. Toshkentda mebel sotib olish.{% endif %}{% endblock %}

{% block meta_keywords %}{% if lang == 'ru' %}мебель, премиум мебель, стеклянная мебель, мебель на заказ, мебель для кафе, мебель для ресторанов, мебель для клиник, мебель для дома, Furniglass, Мebel, Узбекистан, Ташкент, купить мебель{% elif lang == 'en' %}furniture, premium furniture, glass furniture, custom furniture, cafe furniture, restaurant furniture, clinic furniture, home furniture, Furniglass, Mebel, Uzbekistan, Tashkent, buy furniture{% else %}mebel, premium mebel, shisha mebel, individual mebel, kafe mebel, restoran mebel, klinika mebel, uy mebel, Furniglass, Mebel, O'zbekiston, Toshkent, mebel sotib olish{% endif %}{% endblock %}

{% block canonical %}{{ request.url_root.rstrip('/') }}{% endblock %}

{% block schema_type %}Organization{% endblock %}

{% block extra_meta %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "FurnitureStore",
    "name": "Furniglass",
    "image": "{{ request.url_root.rstrip('/') }}/uploads/designs/logo.png",
    "description": "{% if lang == 'ru' %}Ведущий производитель премиум мебели и стеклянных изделий в Узбекистане{% elif lang == 'en' %}Leading manufacturer of premium furniture and glass products in Uzbekistan{% else %}O'zbekistondagi premium mebel va shisha mahsulotlar ishlab chiqaruvchi yetakchi kompaniya{% endif %}",
    "url": "{{ request.url_root.rstrip('/') }}",
    "telephone": "+998901234567",
    "address": {
        "@type": "PostalAddress",
        "addressCountry": "UZ",
        "addressLocality": "Tashkent"
    },
    "priceRange": "$$",
    "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        "opens": "09:00",
        "closes": "18:00"
    },
    "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "{{ reviews|length }}"
    }
}
</script>
{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary: #1a1a2e;
        --accent: #f59e0b;
        --accent-hover: #d97706;
        --light: #fafafa;
    }
    
    /* Smooth scrolling */
    html { scroll-behavior: smooth; }
    
    /* Hero - Premium Minimalist */
    .hero-section {
        position: relative;
        height: 100vh;
        min-height: 700px;
        overflow: hidden;
    }
    
    .hero-bg-image {
        position: absolute;
        inset: 0;
        background-image: url('/uploads/designs/3.jpg');
        background-size: cover;
        background-position: center;
    }
    
    @media (min-width: 768px) {
        .hero-bg-image {
            background-attachment: fixed;
        }
    }
    
    .hero-bg-image::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(to right, rgba(26,26,46,0.95) 0%, rgba(26,26,46,0.7) 50%, rgba(26,26,46,0.5) 100%);
    }
    
    @media (max-width: 767px) {
        .hero-bg-image::after {
            background: linear-gradient(to bottom, rgba(26,26,46,0.8) 0%, rgba(26,26,46,0.9) 100%);
        }
    }
    
    /* Text reveal animation */
    @keyframes textReveal {
        0% { opacity: 0; transform: translateY(40px); }
        100% { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes lineExpand {
        0% { width: 0; }
        100% { width: 60px; }
    }
    
    .animate-reveal {
        animation: textReveal 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
    }
    
    .animate-line {
        animation: lineExpand 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        animation-delay: 0.8s;
    }
    
    .animate-reveal-delay-1 { animation-delay: 0.15s; }
    .animate-reveal-delay-2 { animation-delay: 0.3s; }
    .animate-reveal-delay-3 { animation-delay: 0.45s; }
    .animate-reveal-delay-4 { animation-delay: 0.6s; }
    
    /* Product card - Premium */
    .product-card {
        position: relative;
        overflow: hidden;
        background: #fff;
    }
    
    .product-card .card-image {
        position: relative;
        overflow: hidden;
    }
    
    .product-card .card-image::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(to top, rgba(26,26,46,0.6) 0%, transparent 50%);
        opacity: 0;
        transition: opacity 0.4s ease;
        z-index: 1;
    }
    
    .product-card:hover .card-image::before {
        opacity: 1;
    }
    
    .product-card .card-image img {
        transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    .product-card:hover .card-image img {
        transform: scale(1.08);
    }
    
    .product-card .card-actions {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 16px;
        display: flex;
        gap: 8px;
        transform: translateY(100%);
        opacity: 0;
        transition: all 0.4s ease;
        z-index: 2;
    }
    
    .product-card:hover .card-actions {
        transform: translateY(0);
        opacity: 1;
    }
    
    .product-card .card-content {
        padding: 16px;
        background: #fff;
    }
    
    /* Category card */
    .category-card {
        position: relative;
        overflow: hidden;
        transition: all 0.5s ease;
    }
    
    .category-card::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(to top, rgba(26,26,46,0.9) 0%, rgba(26,26,46,0.3) 50%, transparent 100%);
        transition: all 0.4s;
    }
    
    .category-card:hover::after {
        background: linear-gradient(to top, rgba(26,26,46,0.95) 0%, rgba(26,26,46,0.5) 60%, rgba(26,26,46,0.2) 100%);
    }
    
    .category-card:hover img {
        transform: scale(1.08);
    }
    

    .category-card img {
        transition: transform 1.5s ease;
    }
    

    
    /* Section reveal */
    .reveal-section {
        opacity: 0;
        transform: translateY(50px);
        transition: all 0.8s ease;
    }
    
    .reveal-section.revealed {
        opacity: 1;
        transform: translateY(0);
    }
    
    /* Line clamp */
    .line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    
    /* Configurator Styles */
    .config-hotspot {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: #fff;
        border: 2px solid var(--accent);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 16px rgba(245, 158, 11, 0.25);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10;
    }
    
    .config-hotspot:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 24px rgba(245, 158, 11, 0.4);
        border-color: var(--accent-hover);
    }
    
    .config-hotspot.active {
        background: var(--accent);
        border-color: var(--accent);
        box-shadow: 0 6px 24px rgba(245, 158, 11, 0.5);
    }
    
    .config-hotspot.active .hotspot-icon svg {
        stroke: #fff;
    }
    
    .hotspot-pulse {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: var(--accent);
        opacity: 0;
        animation: hotspotPulse 2s infinite;
    }
    
    @keyframes hotspotPulse {
        0% { transform: scale(1); opacity: 0.6; }
        100% { transform: scale(1.8); opacity: 0; }
    }
    
    .hotspot-icon {
        position: relative;
        z-index: 1;
        width: 20px;
        height: 20px;
    }
    
    .hotspot-icon svg {
        width: 100%;
        height: 100%;
        stroke: var(--accent);
        transition: stroke 0.3s ease;
    }
    
    /* Config Buttons */
    .config-btn {
        padding: 10px 20px;
        border: 2px solid #e5e5e5;
        background: #fff;
        border-radius: 0;
        font-size: 13px;
        font-weight: 500;
        color: #666;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .config-btn:hover {
        border-color: var(--accent);
        color: var(--accent);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(245, 158, 11, 0.15);
    }
    
    .config-btn.active {
        background: var(--accent);
        border-color: var(--accent);
        color: #fff;
        box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
    }
    
    /* Config Color Swatches */
    .config-color {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 3px solid #e5e5e5;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .config-color:hover {
        transform: scale(1.15);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    }
    
    .config-color.active {
        border-color: var(--accent);
        box-shadow: 0 0 0 3px #fff, 0 0 0 6px var(--accent), 0 4px 16px rgba(245, 158, 11, 0.4);
        transform: scale(1.1);
    }
    
    /* Config Option */
    .config-option {
        padding: 16px;
        border-radius: 0;
        background: #fafafa;
        transition: all 0.3s ease;
    }
    
    .config-option:hover {
        background: #f5f5f5;
    }
    
    /* Bottom Sheet */
    .bottom-sheet {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        transform: translateY(100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .bottom-sheet.active {
        transform: translateY(0);
    }
    
    .bottom-sheet-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .bottom-sheet-overlay.active {
        opacity: 1;
        visibility: visible;
    }
    
    .bottom-sheet-header {
        padding: 20px;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        background: white;
        z-index: 1;
    }
    
    .bottom-sheet-content {
        padding: 20px;
    }
    
    .bottom-sheet-handle {
        width: 40px;
        height: 4px;
        background: #d1d5db;
        border-radius: 2px;
        margin: 0 auto 20px;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section -mt-[70px] md:-mt-[80px]">
    <div class="hero-bg-image"></div>
    
    <div class="relative h-full flex items-center pt-[90px] md:pt-[100px]">
        <div class="container mx-auto px-6 lg:px-16">
            <div class="max-w-3xl">
                <!-- Accent Line 
                <div class="animate-line h-[2px] bg-[#f59e0b] mb-8 w-0"></div>
                -->
                
                <!-- Subtitle -->
                <p class="animate-reveal text-[#f59e0b] text-xs md:text-sm tracking-[0.3em] uppercase mb-4">
                    {% if lang == 'ru' %}FURNI GLASS{% elif lang == 'en' %}FURNI GLASS{% else %}FURNI GLASS{% endif %}
                </p>
                
                <!-- Main Title -->
                <h1 class="animate-reveal animate-reveal-delay-1 text-white text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-semibold leading-[1.1] mb-6">
                    {% if lang == 'ru' %}Мебель вашей<br>мечты{% elif lang == 'en' %}Furniture of<br>Your Dreams{% else %}Orzuingizdagi<br>mebel{% endif %}
            </h1>
            
                <!-- Tagline -->
                <p class="animate-reveal animate-reveal-delay-2 text-white/70 text-base md:text-lg max-w-xl mb-10 leading-relaxed">
                    {% if lang == 'ru' %}Создаём уникальную мебель для кафе, ресторанов, клиник и домов с 1999 года{% elif lang == 'en' %}Creating unique furniture for cafes, restaurants, clinics and homes since 1999{% else %}1999 yildan beri kafe, restoran, klinika va uylar uchun noyob mebellar yaratamiz{% endif %}
                </p>
                
                <!-- CTA Buttons -->
                <div class="animate-reveal animate-reveal-delay-3 flex flex-wrap gap-4">
                    <a href="/products" class="bg-[#f59e0b] hover:bg-[#d97706] text-white px-8 py-4 text-sm tracking-wider uppercase font-medium transition-colors">
                        {% if lang == 'ru' %}Каталог{% elif lang == 'en' %}Catalog{% else %}Katalog{% endif %}
                    </a>
                    <a href="/contact" class="border border-white/40 text-white px-8 py-4 text-sm tracking-wider uppercase font-medium hover:bg-white hover:text-[#1a1a2e] transition-all">
                        {% if lang == 'ru' %}Связаться{% elif lang == 'en' %}Contact{% else %}Bog'lanish{% endif %}
                </a>
            </div>
        </div>
        </div>
    </div>
</section>

<!-- Main Categories -->
{% if main_categories %}
<section class="py-16 lg:py-24 bg-white reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <!-- Section Header -->
        <div class="max-w-3xl mb-12 lg:mb-16">
            <p class="text-[#f59e0b] text-xs tracking-[0.2em] uppercase mb-3">{% if lang == 'ru' %}Наши направления{% elif lang == 'en' %}Our Directions{% else %}Bizning yo'nalishlar{% endif %}</p>
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-[#1a1a2e] leading-tight">
                {% if lang == 'ru' %}Мебель для каждого пространства{% elif lang == 'en' %}Furniture for every space{% else %}Har bir makon uchun mebel{% endif %}
            </h2>
                        </div>
        
        <!-- Categories Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6">
            {% for main_cat in main_categories %}
            <a href="/main-category/{{ main_cat.slug }}" class="category-card group relative aspect-[3/4] md:aspect-[2/3]">
                {% if main_cat.image %}
                <img src="/uploads/{{ main_cat.image }}" alt="{{ main_cat.get_name(lang) }}"
                     class="absolute inset-0 w-full h-full object-cover">
                    {% else %}
                <div class="absolute inset-0 bg-gradient-to-br from-[#1a1a2e] to-[#2d2d44]"></div>
                    {% endif %}
                
                <div class="category-content absolute inset-0 z-10 flex flex-col justify-end p-6 lg:p-8">
                    <span class="text-[#f59e0b] text-xs tracking-wider uppercase mb-2">0{{ loop.index }}</span>
                    <h3 class="text-2xl md:text-3xl font-bold text-white mb-3">
                        {{ main_cat.get_name(lang) }}
                    </h3>
                    <div class="flex items-center gap-2 text-white/70 text-sm group-hover:text-[#f59e0b] transition-colors">
                        <span>{% if lang == 'ru' %}Смотреть{% elif lang == 'en' %}Explore{% else %}Ko'rish{% endif %}</span>
                        <svg class="w-4 h-4 group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                        </svg>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
                        </div>
</section>
{% endif %}

<!-- Services Strip -->
<section class="py-6 bg-[#1a1a2e]">
    <div class="container mx-auto px-6 lg:px-16">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 border border-[#f59e0b]/40 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                    </svg>
                        </div>
                <p class="text-white text-sm font-medium">25 {% if lang == 'ru' %}лет гарантии{% elif lang == 'en' %}years warranty{% else %}yil kafolat{% endif %}</p>
                    </div>
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 border border-[#f59e0b]/40 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"/>
                    </svg>
                </div>
                <p class="text-white text-sm font-medium">{% if lang == 'ru' %}Бесплатная доставка{% elif lang == 'en' %}Free delivery{% else %}Bepul yetkazish{% endif %}</p>
                        </div>
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 border border-[#f59e0b]/40 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"/>
                    </svg>
                        </div>
                <p class="text-white text-sm font-medium">{% if lang == 'ru' %}Индивидуальный дизайн{% elif lang == 'en' %}Custom design{% else %}Individual dizayn{% endif %}</p>
                    </div>
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 border border-[#f59e0b]/40 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
                    </svg>
                </div>
                <p class="text-white text-sm font-medium">{% if lang == 'ru' %}Премиум качество{% elif lang == 'en' %}Premium quality{% else %}Premium sifat{% endif %}</p>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products -->
{% if bestsellers %}
<section class="py-16 lg:py-24 bg-[#f8f8f8] reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <!-- Section Header -->
        <div class="flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12">
            <div class="max-w-2xl">
                <p class="text-[#f59e0b] text-xs tracking-[0.2em] uppercase mb-3">{% if lang == 'ru' %}Коллекция{% elif lang == 'en' %}Collection{% else %}Kolleksiya{% endif %}</p>
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-[#1a1a2e]">
                    {% if lang == 'ru' %}Популярные товары{% elif lang == 'en' %}Popular Products{% else %}Mashhur mahsulotlar{% endif %}
            </h2>
                    </div>
            <a href="/products" class="group flex items-center gap-3 text-[#1a1a2e] hover:text-[#f59e0b] transition-colors">
                <span class="text-sm font-medium">{% if lang == 'ru' %}Все товары{% elif lang == 'en' %}All products{% else %}Barcha mahsulotlar{% endif %}</span>
                <svg class="w-5 h-5 group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                </svg>
            </a>
                </div>
        
        <!-- Products Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 lg:gap-8">
            {% for product in bestsellers[:12] %}
            <article class="product-card group">
                <div class="card-image aspect-[4/5] bg-[#f5f5f5]">
                                {% if product.images %}
                                    {% set images = product.images|from_json %}
                                    {% if images %}
                                        <img src="/uploads/{{ images[0] }}" alt="{{ product.get_name(lang) }}" 
                             class="w-full h-full object-cover">
                                    {% endif %}
                                {% endif %}
                    
                    {% if product.is_bestseller %}
                    <span class="absolute top-4 left-4 z-10 bg-[#f59e0b] text-white text-[10px] tracking-widest uppercase px-3 py-1.5 font-medium">
                        {% if lang == 'ru' %}Хит{% elif lang == 'en' %}Best{% else %}Top{% endif %}
                    </span>
                    {% endif %}
                    
                    <div class="card-actions">
                        <a href="/product/{{ product.id }}" class="flex-1 bg-white text-[#1a1a2e] text-center py-3 text-xs font-medium tracking-wider uppercase hover:bg-[#f59e0b] hover:text-white transition">
                            {% if lang == 'ru' %}Подробнее{% elif lang == 'en' %}Details{% else %}Batafsil{% endif %}
                        </a>
                        <button class="add-to-cart-btn w-12 bg-[#1a1a2e] text-white flex items-center justify-center hover:bg-[#f59e0b] transition"
                                data-product-id="{{ product.id }}">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16m8-8H4"/>
                            </svg>
                                    </button>
                        </div>
                        </div>
                
                <div class="card-content">
                    <p class="text-[11px] text-[#f59e0b] tracking-widest uppercase mb-2">
                        {{ product.category.get_name(lang) if product.category else 'Mebel' }}
                    </p>
                    <a href="/product/{{ product.id }}" class="block">
                        <h3 class="text-[#1a1a2e] font-medium mb-3 line-clamp-1 group-hover:text-[#f59e0b] transition-colors">
                            {{ product.get_name(lang) }}
                        </h3>
                    </a>
                    <div class="flex items-baseline gap-2">
                        <span class="text-xl font-light text-[#1a1a2e]">${{ "%.0f"|format(product.price) }}</span>
                        <span class="text-sm text-gray-400 line-through">${{ "%.0f"|format(product.price * 1.2) }}</span>
                    </div>
                </div>
            </article>
            {% endfor %}
                    </div>
        
        <!-- View All Button (Mobile) -->
        <div class="mt-10 text-center lg:hidden">
            <a href="/products" class="inline-block border-2 border-[#1a1a2e] text-[#1a1a2e] px-8 py-4 text-sm tracking-wider uppercase font-medium hover:bg-[#1a1a2e] hover:text-white transition-all">
                {% if lang == 'ru' %}Все товары{% elif lang == 'en' %}All products{% else %}Barcha mahsulotlar{% endif %}
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- All Categories Section -->
{% if categories %}
<section class="py-16 lg:py-24 bg-white reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <!-- Section Header -->
        <div class="flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12">
            <div class="max-w-2xl">
                <p class="text-[#f59e0b] text-xs tracking-[0.2em] uppercase mb-3">{% if lang == 'ru' %}Категории{% elif lang == 'en' %}Categories{% else %}Kategoriyalar{% endif %}</p>
                <h2 class="text-3xl md:text-4xl font-bold text-[#1a1a2e] leading-tight">
                    {% if lang == 'ru' %}Все категории мебели{% elif lang == 'en' %}All Furniture Categories{% else %}Barcha mebel kategoriyalari{% endif %}
            </h2>
        </div>
            </div>
            
        <!-- Categories Grid -->
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 lg:gap-6">
            {% for category in categories[:12] %}
            <a href="/products?category={{ category.id }}" class="category-card group relative aspect-[4/3]">
                        {% if category.image %}
                    <img src="/uploads/{{ category.image }}" alt="{{ category.get_name(lang) }}" 
                     class="absolute inset-0 w-full h-full object-cover">
                        {% else %}
                <div class="absolute inset-0 bg-gradient-to-br from-[#2a2a3e] to-[#1a1a2e]"></div>
                    {% endif %}
                
                <div class="category-content absolute inset-0 z-10 flex flex-col justify-end p-4 lg:p-6">
                    <h3 class="font-bold text-lg lg:text-xl text-white mb-1">
                        {{ category.get_name(lang) }}
                    </h3>
                    <p class="text-white/60 text-xs">{{ category.products|length }} {% if lang == 'ru' %}товаров{% elif lang == 'en' %}products{% else %}mahsulot{% endif %}</p>
                </div>
            </a>
            {% endfor %}
                    </div>
                </div>
</section>
{% endif %}

<!-- About Section -->
<section class="py-16 lg:py-24 bg-[#1a1a2e] reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            <!-- Image -->
            <div class="relative">
                <div class="aspect-[4/5] overflow-hidden">
                    <img src="/uploads/designs/2.jpg" alt="Furniglass" class="w-full h-full object-cover">
                    </div>
                </div>
            
            <!-- Content -->
            <div>
                <p class="text-[#f59e0b] text-xs tracking-[0.2em] uppercase mb-3">{% if lang == 'ru' %}О компании{% elif lang == 'en' %}About Us{% else %}Biz haqimizda{% endif %}</p>
                <h2 class="text-3xl md:text-4xl font-bold text-white leading-tight mb-6">
                    {% if lang == 'ru' %}Мы создаём мебель вашей мечты{% elif lang == 'en' %}We create furniture of your dreams{% else %}Biz sizning orzuingizdagi mebellarni yaratamiz{% endif %}
            </h2>
                <p class="text-white/60 leading-relaxed mb-8">
                    {% if lang == 'ru' %}
                    С 1999 года мы производим премиальную мебель для кафе, ресторанов, клиник и частных домов. Каждое изделие создаётся с любовью к деталям и стремлением к совершенству.
                    {% elif lang == 'en' %}
                    Since 1999, we have been producing premium furniture for cafes, restaurants, clinics and private homes. Each piece is created with love for details and striving for perfection.
                    {% else %}
                    1999 yildan beri biz kafe, restoran, klinika va xususiy uylar uchun premium mebellar ishlab chiqaramiz. Har bir buyum tafsilotlarga muhabbat va mukammallikka intilish bilan yaratilgan.
                    {% endif %}
                </p>
                
                <!-- Features Grid -->
                <div class="grid grid-cols-2 gap-6 mb-8">
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 bg-[#f59e0b]/20 flex items-center justify-center flex-shrink-0 mt-1">
                            <svg class="w-4 h-4 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                    </div>
                        <div>
                            <p class="text-white font-medium text-sm">{% if lang == 'ru' %}Премиум материалы{% elif lang == 'en' %}Premium materials{% else %}Premium materiallar{% endif %}</p>
                </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 bg-[#f59e0b]/20 flex items-center justify-center flex-shrink-0 mt-1">
                            <svg class="w-4 h-4 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                </div>
                        <div>
                            <p class="text-white font-medium text-sm">{% if lang == 'ru' %}25 лет гарантии{% elif lang == 'en' %}25 years warranty{% else %}25 yil kafolat{% endif %}</p>
                    </div>
                </div>
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 bg-[#f59e0b]/20 flex items-center justify-center flex-shrink-0 mt-1">
                            <svg class="w-4 h-4 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <div>
                            <p class="text-white font-medium text-sm">{% if lang == 'ru' %}Бесплатная доставка{% elif lang == 'en' %}Free delivery{% else %}Bepul yetkazish{% endif %}</p>
                    </div>
                        </div>
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 bg-[#f59e0b]/20 flex items-center justify-center flex-shrink-0 mt-1">
                            <svg class="w-4 h-4 text-[#f59e0b]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                    </div>
                        <div>
                            <p class="text-white font-medium text-sm">{% if lang == 'ru' %}Индивидуальный дизайн{% elif lang == 'en' %}Custom design{% else %}Individual dizayn{% endif %}</p>
                </div>
                    </div>
                </div>
                
                <a href="/about" class="inline-flex items-center gap-3 text-[#f59e0b] hover:text-white transition-colors group">
                    <span class="text-sm font-medium">{% if lang == 'ru' %}Подробнее о нас{% elif lang == 'en' %}More about us{% else %}Biz haqimizda batafsil{% endif %}</span>
                    <svg class="w-5 h-5 group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Process Section -->
<section class="py-12 lg:py-16 bg-white reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <!-- Header -->
        <div class="text-center max-w-3xl mx-auto mb-8 lg:mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-[#1a1a2e] mb-3">
                {% if lang == 'ru' %}Как мы работаем{% elif lang == 'en' %}How we work{% else %}Qanday ishlaymiz{% endif %}
                </h2>
            <p class="text-gray-600 text-sm lg:text-base">
                {% if lang == 'ru' %}3 этапа: Консультация → Производство → Доставка{% elif lang == 'en' %}3 steps: Consultation → Production → Delivery{% else %}3 bosqich: Konsultatsiya → Ishlab chiqarish → Yetkazish{% endif %}
            </p>
        </div>
        
        <!-- Steps with connecting line -->
        <div class="relative max-w-4xl mx-auto">
            <!-- Connecting dashed line -->
            <div class="hidden lg:block absolute top-1/2 left-0 right-0 h-px -translate-y-1/2" style="background: repeating-linear-gradient(to right, #f59e0b 0, #f59e0b 6px, transparent 6px, transparent 12px); z-index: 1;"></div>
            
            <!-- Steps Container -->
            <div class="relative grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8 z-10">
                <!-- Step 1: Consultation -->
                <div class="relative">
                    <div class="bg-white p-5 lg:p-6 border border-gray-200 hover:border-[#f59e0b] transition-colors">
                        <!-- Step Number Badge -->
                        <div class="absolute -top-3 left-0 w-8 h-8 bg-[#f59e0b] flex items-center justify-center z-20">
                            <span class="text-white font-bold text-sm">1</span>
                    </div>
                        
                        <!-- Title -->
                        <h3 class="text-lg lg:text-xl font-bold text-[#1a1a2e] mb-2">
                            {% if lang == 'ru' %}Консультация{% elif lang == 'en' %}Consultation{% else %}Konsultatsiya{% endif %}
                        </h3>
                        
                        <!-- Description -->
                        <p class="text-gray-600 text-sm leading-relaxed">
                            {% if lang == 'ru' %}Бесплатная консультация, помощь в выборе стиля и дизайна мебели{% elif lang == 'en' %}Free consultation, help with choosing style and furniture design{% else %}Bepul maslahat, uslub va mebel dizaynini tanlashda yordam{% endif %}
                        </p>
                    </div>
            </div>
            
                <!-- Step 2: Production -->
                <div class="relative lg:mt-12">
                    <div class="bg-white p-5 lg:p-6 border border-gray-200 hover:border-[#f59e0b] transition-colors">
                        <!-- Step Number Badge -->
                        <div class="absolute -top-3 left-0 w-8 h-8 bg-[#f59e0b] flex items-center justify-center z-20">
                            <span class="text-white font-bold text-sm">2</span>
                    </div>
                        
                        <!-- Title -->
                        <h3 class="text-lg lg:text-xl font-bold text-[#1a1a2e] mb-2">
                            {% if lang == 'ru' %}Производство{% elif lang == 'en' %}Production{% else %}Ishlab chiqarish{% endif %}
                        </h3>
                        
                        <!-- Description -->
                        <p class="text-gray-600 text-sm leading-relaxed">
                            {% if lang == 'ru' %}Профессиональное изготовление мебели по вашим размерам и требованиям{% elif lang == 'en' %}Professional furniture manufacturing according to your dimensions and requirements{% else %}Sizning o'lchamlaringiz va talablaringiz bo'yicha professional mebel yasash{% endif %}
                        </p>
            </div>
        </div>
                
                <!-- Step 3: Delivery -->
                <div class="relative">
                    <div class="bg-white p-5 lg:p-6 border border-gray-200 hover:border-[#f59e0b] transition-colors">
                        <!-- Step Number Badge -->
                        <div class="absolute -top-3 left-0 w-8 h-8 bg-[#f59e0b] flex items-center justify-center z-20">
                            <span class="text-white font-bold text-sm">3</span>
    </div>
                        
                        <!-- Title -->
                        <h3 class="text-lg lg:text-xl font-bold text-[#1a1a2e] mb-2">
                            {% if lang == 'ru' %}Доставка{% elif lang == 'en' %}Delivery{% else %}Yetkazish{% endif %}
                        </h3>
                        
                        <!-- Description -->
                        <p class="text-gray-600 text-sm leading-relaxed">
                            {% if lang == 'ru' %}Доставка готовой мебели и профессиональная установка на месте{% elif lang == 'en' %}Delivery of finished furniture and professional on-site installation{% else %}Tayyor mebelni yetkazish va professional o'rnatish{% endif %}
                        </p>
        </div>
                    </div>
                    </div>
        </div>
    </div>
</section>

<!-- More Products Section -->
{% if bestsellers %}
<section class="py-16 lg:py-24 bg-[#f8f8f8] reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <div class="flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12">
            <div class="max-w-2xl">
                <p class="text-[#f59e0b] text-xs tracking-[0.2em] uppercase mb-3">{% if lang == 'ru' %}Популярное{% elif lang == 'en' %}Popular{% else %}Ommabop{% endif %}</p>
                <h2 class="text-3xl md:text-4xl font-bold text-[#1a1a2e]">
                    {% if lang == 'ru' %}Ещё больше товаров{% elif lang == 'en' %}More Products{% else %}Ko'proq mahsulotlar{% endif %}
            </h2>
                        </div>
                    </div>
        
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 lg:gap-6">
            {% for product in bestsellers[12:22] %}
            <article class="product-card group bg-white">
                <a href="/product/{{ product.id }}" class="block">
                    <div class="relative aspect-[3/4] overflow-hidden bg-[#f0f0f0]">
                                {% if product.images %}
                                    {% set images = product.images|from_json %}
                                    {% if images %}
                                        <img src="/uploads/{{ images[0] }}" alt="{{ product.get_name(lang) }}" 
                                 class="product-img w-full h-full object-cover">
                                    {% endif %}
                                {% endif %}
                    </div>
                    <div class="p-3">
                        <h3 class="font-semibold text-[#1a1a2e] text-sm mb-1 line-clamp-1 group-hover:text-[#f59e0b] transition-colors">
                                        {{ product.get_name(lang) }}
                                    </h3>
                        <p class="font-bold text-[#1a1a2e]">${{ "%.0f"|format(product.price) }}</p>
                </div>
            </a>
            </article>
            {% endfor %}
                        </div>
                                
        <div class="mt-10 text-center">
            <a href="/products" class="inline-flex items-center gap-3 border-2 border-[#1a1a2e] text-[#1a1a2e] px-8 py-4 text-sm tracking-wider uppercase font-medium hover:bg-[#1a1a2e] hover:text-white transition-all">
                {% if lang == 'ru' %}Смотреть все{% elif lang == 'en' %}View all{% else %}Barchasini ko'rish{% endif %}
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                </svg>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Individual Configurator Section -->
<section class="py-16 lg:py-24 bg-[#f8f8f8] reveal-section" id="configurator">
    <div class="container mx-auto px-6 lg:px-16">
        <!-- Header -->
        <div class="max-w-3xl mb-12 lg:mb-16">
            <p class="text-[#f59e0b] text-xs tracking-[0.2em] uppercase mb-3">
                {% if lang == 'ru' %}Индивидуальный заказ{% elif lang == 'en' %}Custom Order{% else %}Individual buyurtma{% endif %}
            </p>
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-[#1a1a2e] leading-tight mb-6">
                {% if lang == 'ru' %}Furniglass — создаёт мебель в вашем стиле{% elif lang == 'en' %}Furniglass — creates furniture in your style{% else %}Furniglass — mebelni siz istagan uslubda yaratadi{% endif %}
            </h2>
            <p class="text-gray-600 text-base lg:text-lg leading-relaxed">
                {% if lang == 'ru' %}Вы выбираете каждую деталь: тип ножек, материал, цвет, узор и стиль. Furniglass производит мебель не стандартную, а по вашему вкусу.{% elif lang == 'en' %}You choose every detail: leg type, material, color, pattern and style. Furniglass produces furniture not standard, but according to your taste.{% else %}Siz har bir detalni o'zingiz tanlaysiz: oyoq turi, material, rang, naqsh va stil. Furniglass mebellarni standart emas, sizning didingizga moslab ishlab chiqaradi.{% endif %}
            </p>
        </div>
        
        <!-- Configurator Card -->
        <div class="bg-white shadow-2xl overflow-hidden border border-gray-100">
            <div class="grid grid-cols-1 lg:grid-cols-2">
                <!-- Left: Product Image with Interactive Points -->
                <div class="relative bg-gradient-to-br from-gray-50 to-gray-100 p-8 lg:p-12 min-h-[400px] lg:min-h-[600px]">
                    <!-- Main Product Image -->
                    <div class="relative w-full h-full flex items-center justify-center">
                        <img src="/uploads/designs/chair-config.png" alt="Configurable Chair" class="max-w-full max-h-[500px] object-contain" id="config-main-image" onerror="this.src='/uploads/products/default.jpg'">
                        
                        <!-- Interactive Hotspots -->
                        <!-- Legs -->
                        <button class="config-hotspot absolute bottom-[15%] left-[35%]" data-config="legs" aria-label="Oyoqlar">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
                                </svg>
                            </span>
                        </button>
                        
                        <!-- Seat -->
                        <button class="config-hotspot absolute top-[45%] left-[50%]" data-config="seat" aria-label="O'rindiq">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                                </svg>
                            </span>
                        </button>
                        
                        <!-- Backrest -->
                        <button class="config-hotspot absolute top-[20%] left-[45%]" data-config="backrest" aria-label="Suyanchiq">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                </svg>
                            </span>
                        </button>
                        
                        <!-- Pattern -->
                        <button class="config-hotspot absolute top-[35%] right-[30%]" data-config="pattern" aria-label="Naqsh">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                            </span>
                        </button>
                        
                        <!-- Color/Material -->
                        <button class="config-hotspot absolute bottom-[35%] right-[25%]" data-config="material" aria-label="Material">
                            <span class="hotspot-pulse"></span>
                            <span class="hotspot-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                                </svg>
                            </span>
                        </button>
                </div>
            </div>
                
                <!-- Right: Configuration Options -->
                <div class="p-6 lg:p-10">
                    <h3 class="text-xl lg:text-2xl font-bold text-[#1a1a2e] mb-6">
                        {% if lang == 'ru' %}Настройте под себя{% elif lang == 'en' %}Customize for yourself{% else %}O'zingizga moslab sozlang{% endif %}
                    </h3>
                    
                    <!-- Config Options -->
                    <div class="space-y-6">
                        <!-- Legs Option -->
                        <div class="config-option" data-option="legs">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-medium text-gray-500 uppercase tracking-wider">
                                    {% if lang == 'ru' %}Ножки{% elif lang == 'en' %}Legs{% else %}Oyoqlar{% endif %}
                                </span>
                                <span class="config-selected-label text-sm font-semibold text-[#1a1a2e]">Classic</span>
        </div>
                            <div class="flex flex-wrap gap-2">
                                <button class="config-btn active" data-value="classic">Classic</button>
                                <button class="config-btn" data-value="modern">Modern</button>
                                <button class="config-btn" data-value="vintage">Vintage</button>
                                <button class="config-btn" data-value="minimalist">Minimalist</button>
                    </div>
                    </div>
                        
                        <!-- Seat Option -->
                        <div class="config-option" data-option="seat">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-medium text-gray-500 uppercase tracking-wider">
                                    {% if lang == 'ru' %}Сиденье{% elif lang == 'en' %}Seat{% else %}O'rindiq{% endif %}
                                </span>
                                <span class="config-selected-label text-sm font-semibold text-[#1a1a2e]">Ko'ja</span>
                </div>
                            <div class="flex flex-wrap gap-2">
                                <button class="config-btn active" data-value="koja">Ko'ja</button>
                                <button class="config-btn" data-value="mato">Mato</button>
                                <button class="config-btn" data-value="velvet">Velvet</button>
                                <button class="config-btn" data-value="eko">Eko-ko'ja</button>
        </div>
    </div>
                        
                        <!-- Backrest Option -->
                        <div class="config-option" data-option="backrest">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-medium text-gray-500 uppercase tracking-wider">
                                    {% if lang == 'ru' %}Спинка{% elif lang == 'en' %}Backrest{% else %}Suyanchiq{% endif %}
                                </span>
                                <span class="config-selected-label text-sm font-semibold text-[#1a1a2e]">Yumshoq</span>
                        </div>
                            <div class="flex flex-wrap gap-2">
                                <button class="config-btn active" data-value="soft">Yumshoq</button>
                                <button class="config-btn" data-value="firm">Qattiq</button>
                                <button class="config-btn" data-value="ergonomic">Ergonomik</button>
                    </div>
                    </div>
                        
                        <!-- Pattern Option -->
                        <div class="config-option" data-option="pattern">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-medium text-gray-500 uppercase tracking-wider">
                                    {% if lang == 'ru' %}Узор{% elif lang == 'en' %}Pattern{% else %}Naqsh{% endif %}
                                </span>
                                <span class="config-selected-label text-sm font-semibold text-[#1a1a2e]">Oddiy</span>
                </div>
                            <div class="flex flex-wrap gap-2">
                                <button class="config-btn active" data-value="plain">Oddiy</button>
                                <button class="config-btn" data-value="quilted">Tikuv</button>
                                <button class="config-btn" data-value="tufted">Tugmali</button>
                                <button class="config-btn" data-value="modern">Modern Line</button>
        </div>
    </div>
                        
                        <!-- Color Option -->
                        <div class="config-option" data-option="material">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-medium text-gray-500 uppercase tracking-wider">
                                    {% if lang == 'ru' %}Цвет{% elif lang == 'en' %}Color{% else %}Rang{% endif %}
                                </span>
                                <span class="config-selected-label text-sm font-semibold text-[#1a1a2e]">Qora</span>
        </div>
                            <div class="flex flex-wrap gap-3">
                                <button class="config-color active" data-value="black" data-label="Qora" style="background: #1a1a2e;" title="Qora"></button>
                                <button class="config-color" data-value="brown" data-label="Jigarrang" style="background: #8B4513;" title="Jigarrang"></button>
                                <button class="config-color" data-value="beige" data-label="Bej" style="background: #D4B896;" title="Bej"></button>
                                <button class="config-color" data-value="gray" data-label="Kulrang" style="background: #6B7280;" title="Kulrang"></button>
                                <button class="config-color" data-value="white" data-label="Oq" style="background: #F5F5F5; border: 1px solid #ddd;" title="Oq"></button>
                                <button class="config-color" data-value="green" data-label="Yashil" style="background: #2D5A3D;" title="Yashil"></button>
                                <button class="config-color" data-value="blue" data-label="Ko'k" style="background: #1E3A5F;" title="Ko'k"></button>
                                <button class="config-color" data-value="gold" data-label="Oltin" style="background: linear-gradient(135deg, #D4AF37, #F5D061);" title="Oltin"></button>
                </div>
            </div>
                        </div>
                    
                    <!-- Summary -->
                    <div class="mt-8 pt-6 border-t border-gray-100">
                        <h4 class="text-sm font-medium text-gray-500 uppercase tracking-wider mb-4">
                            {% if lang == 'ru' %}Ваша конфигурация{% elif lang == 'en' %}Your Configuration{% else %}Sizning konfiguratsiyangiz{% endif %}
                        </h4>
                        <div id="config-summary" class="bg-[#f8f8f8] p-4 text-sm space-y-2">
                            <div class="flex justify-between"><span class="text-gray-500">{% if lang == 'ru' %}Ножки{% elif lang == 'en' %}Legs{% else %}Oyoqlar{% endif %}:</span> <span class="font-medium text-[#1a1a2e]" id="summary-legs">Classic</span></div>
                            <div class="flex justify-between"><span class="text-gray-500">{% if lang == 'ru' %}Сиденье{% elif lang == 'en' %}Seat{% else %}O'rindiq{% endif %}:</span> <span class="font-medium text-[#1a1a2e]" id="summary-seat">Ko'ja</span></div>
                            <div class="flex justify-between"><span class="text-gray-500">{% if lang == 'ru' %}Спинка{% elif lang == 'en' %}Backrest{% else %}Suyanchiq{% endif %}:</span> <span class="font-medium text-[#1a1a2e]" id="summary-backrest">Yumshoq</span></div>
                            <div class="flex justify-between"><span class="text-gray-500">{% if lang == 'ru' %}Узор{% elif lang == 'en' %}Pattern{% else %}Naqsh{% endif %}:</span> <span class="font-medium text-[#1a1a2e]" id="summary-pattern">Oddiy</span></div>
                            <div class="flex justify-between"><span class="text-gray-500">{% if lang == 'ru' %}Цвет{% elif lang == 'en' %}Color{% else %}Rang{% endif %}:</span> <span class="font-medium text-[#1a1a2e]" id="summary-material">Qora</span></div>
                    </div>
                        </div>
        
                    <!-- CTA Buttons -->
                    <div class="mt-6 space-y-3">
                        <a href="/custom" class="block w-full bg-[#1a1a2e] hover:bg-[#2a2a3e] text-white text-center py-4 font-bold tracking-wider uppercase transition-colors">
                            {% if lang == 'ru' %}Полный конфигуратор{% elif lang == 'en' %}Full Configurator{% else %}To'liq konfigurator{% endif %}
                        </a>
                        <button type="button" id="config-order-btn" class="block w-full bg-[#f59e0b] hover:bg-[#d97706] text-white text-center py-4 font-bold tracking-wider uppercase transition-colors">
                            {% if lang == 'ru' %}Заказать эту конфигурацию{% elif lang == 'en' %}Order this configuration{% else %}Shu variantda buyurtma berish{% endif %}
                        </button>
                        <p class="text-center text-xs text-gray-400 mt-3">
                            {% if lang == 'ru' %}Мы свяжемся с вами для уточнения деталей{% elif lang == 'en' %}We will contact you to clarify details{% else %}Tafsilotlarni aniqlashtirish uchun siz bilan bog'lanamiz{% endif %}
                        </p>
                    </div>
                        </div>
                    </div>
                </div>
            </div>
</section>

<!-- Bottom Sheet for Order Form -->
<div class="bottom-sheet-overlay" id="bottom-sheet-overlay"></div>
<div class="bottom-sheet" id="bottom-sheet">
    <div class="bottom-sheet-handle"></div>
    <div class="bottom-sheet-header">
        <h3 class="text-xl font-bold text-[#1a1a2e]">
            {% if lang == 'ru' %}Оформить заказ{% elif lang == 'en' %}Place Order{% else %}Buyurtma berish{% endif %}
        </h3>
        <button type="button" id="close-bottom-sheet" class="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-[#1a1a2e] transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
        </button>
                </div>
    <div class="bottom-sheet-content">
        <form id="order-form">
            <!-- Configuration Summary -->
            <div class="bg-[#f8f8f8] p-4 mb-6">
                <h4 class="font-semibold text-[#1a1a2e] mb-3">
                    {% if lang == 'ru' %}Ваша конфигурация{% elif lang == 'en' %}Your Configuration{% else %}Sizning konfiguratsiyangiz{% endif %}
                </h4>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-600">{% if lang == 'ru' %}Ножки{% elif lang == 'en' %}Legs{% else %}Oyoqlar{% endif %}:</span>
                        <span class="font-medium text-[#1a1a2e]" id="form-legs">Classic</span>
            </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">{% if lang == 'ru' %}Сиденье{% elif lang == 'en' %}Seat{% else %}O'rindiq{% endif %}:</span>
                        <span class="font-medium text-[#1a1a2e]" id="form-seat">Ko'ja</span>
        </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">{% if lang == 'ru' %}Спинка{% elif lang == 'en' %}Backrest{% else %}Suyanchiq{% endif %}:</span>
                        <span class="font-medium text-[#1a1a2e]" id="form-backrest">Yumshoq</span>
    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">{% if lang == 'ru' %}Узор{% elif lang == 'en' %}Pattern{% else %}Naqsh{% endif %}:</span>
                        <span class="font-medium text-[#1a1a2e]" id="form-pattern">Oddiy</span>
            </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">{% if lang == 'ru' %}Цвет{% elif lang == 'en' %}Color{% else %}Rang{% endif %}:</span>
                        <span class="font-medium text-[#1a1a2e]" id="form-material">Qora</span>
            </div>
        </div>
    </div>
            
            <!-- Form Fields -->
            <div class="space-y-4">
                <div>
                    <label for="order-name" class="block text-sm font-medium text-[#1a1a2e] mb-2">
                        {% if lang == 'ru' %}Ваше имя{% elif lang == 'en' %}Your name{% else %}Ismingiz{% endif %} <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="order-name" name="name" required
                           class="w-full px-4 py-3 border border-gray-300 focus:border-[#f59e0b] focus:outline-none transition"
                           placeholder="{% if lang == 'ru' %}Введите ваше имя{% elif lang == 'en' %}Enter your name{% else %}Ismingizni kiriting{% endif %}">
        </div>
        
                <div>
                    <label for="order-phone" class="block text-sm font-medium text-[#1a1a2e] mb-2">
                        {% if lang == 'ru' %}Телефон{% elif lang == 'en' %}Phone{% else %}Telefon{% endif %} <span class="text-red-500">*</span>
                    </label>
                    <input type="tel" id="order-phone" name="phone" required
                           class="w-full px-4 py-3 border border-gray-300 focus:border-[#f59e0b] focus:outline-none transition"
                           placeholder="+998901234567">
                        </div>
                
                <div>
                    <label for="order-message" class="block text-sm font-medium text-[#1a1a2e] mb-2">
                        {% if lang == 'ru' %}Дополнительное сообщение{% elif lang == 'en' %}Additional message{% else %}Qo'shimcha xabar{% endif %}
                    </label>
                    <textarea id="order-message" name="message" rows="4"
                              class="w-full px-4 py-3 border border-gray-300 focus:border-[#f59e0b] focus:outline-none transition resize-none"
                              placeholder="{% if lang == 'ru' %}Ваши пожелания или вопросы...{% elif lang == 'en' %}Your wishes or questions...{% else %}Istaklaringiz yoki savollaringiz...{% endif %}"></textarea>
                    </div>
        </div>
        
            <!-- Submit Button -->
            <div class="mt-6">
                <button type="submit" id="submit-order-btn" class="w-full bg-[#f59e0b] hover:bg-[#d97706] text-white text-center py-4 font-bold tracking-wider uppercase transition-colors">
                    {% if lang == 'ru' %}Отправить заказ{% elif lang == 'en' %}Send Order{% else %}Buyurtmani yuborish{% endif %}
                </button>
        </div>
        </form>
    </div>
</div>

<!-- Testimonials -->
<section class="py-16 lg:py-24 bg-white reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <div class="flex flex-col md:flex-row md:items-end justify-between gap-6 mb-12">
            <div>
                <p class="text-[#f59e0b] text-xs tracking-[0.2em] uppercase mb-3">{% if lang == 'ru' %}Отзывы{% elif lang == 'en' %}Testimonials{% else %}Fikrlar{% endif %}</p>
                <h2 class="text-3xl md:text-4xl font-bold text-[#1a1a2e]">
                    {% if lang == 'ru' %}Что говорят клиенты{% elif lang == 'en' %}What clients say{% else %}Mijozlar fikri{% endif %}
            </h2>
        </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-[#f8f8f8] p-8 border-l-4 border-[#f59e0b]">
                <p class="text-gray-600 leading-relaxed mb-6">
                    {% if lang == 'ru' %}"Превосходное качество и внимание к деталям. Мебель стала украшением нашего ресторана."{% elif lang == 'en' %}"Excellent quality and attention to detail. The furniture has become a decoration of our restaurant."{% else %}"Ajoyib sifat va tafsilotlarga e'tibor. Mebel bizning restorantimizning bezagiga aylandi."{% endif %}
                </p>
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-[#1a1a2e] flex items-center justify-center text-white font-bold">AK</div>
                    <div>
                        <p class="font-bold text-[#1a1a2e]">Alisher Karimov</p>
                        <p class="text-sm text-gray-400">{% if lang == 'ru' %}Ресторатор{% elif lang == 'en' %}Restaurateur{% else %}Restorator{% endif %}</p>
                    </div>
                </div>
            </div>
        
            <div class="bg-[#f8f8f8] p-8 border-l-4 border-[#f59e0b]">
                <p class="text-gray-600 leading-relaxed mb-6">
                    {% if lang == 'ru' %}"Профессиональный подход от начала до конца. Рекомендую всем, кто ценит качество."{% elif lang == 'en' %}"Professional approach from start to finish. I recommend to everyone who values quality."{% else %}"Boshidan oxirigacha professional yondashuv. Sifatni qadrlaydigan hammaga tavsiya qilaman."{% endif %}
                </p>
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-[#1a1a2e] flex items-center justify-center text-white font-bold">DN</div>
                        <div>
                        <p class="font-bold text-[#1a1a2e]">Dilnoza Nazarova</p>
                        <p class="text-sm text-gray-400">{% if lang == 'ru' %}Дизайнер{% elif lang == 'en' %}Designer{% else %}Dizayner{% endif %}</p>
                        </div>
                        </div>
                        </div>

            <div class="bg-[#f8f8f8] p-8 border-l-4 border-[#f59e0b]">
                <p class="text-gray-600 leading-relaxed mb-6">
                    {% if lang == 'ru' %}"Мебель идеально вписалась в интерьер клиники. Пациенты довольны!"{% elif lang == 'en' %}"The furniture fits perfectly into the clinic interior. Patients are happy!"{% else %}"Mebel klinika interyeriga mukammal mos keldi. Bemorlar mamnun!"{% endif %}
                </p>
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-[#1a1a2e] flex items-center justify-center text-white font-bold">SO</div>
                        <div>
                        <p class="font-bold text-[#1a1a2e]">Sardor Otaboyev</p>
                        <p class="text-sm text-gray-400">{% if lang == 'ru' %}Директор клиники{% elif lang == 'en' %}Clinic Director{% else %}Klinika direktori{% endif %}</p>
                        </div>
                    </div>
                </div>
            </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-20 lg:py-28 bg-[#1a1a2e] reveal-section">
    <div class="container mx-auto px-6 lg:px-16">
        <div class="max-w-3xl mx-auto text-center">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight mb-6">
                {% if lang == 'ru' %}Готовы к сотрудничеству?{% elif lang == 'en' %}Ready to collaborate?{% else %}Hamkorlikka tayyormisiz?{% endif %}
                </h2>
            <p class="text-white/60 text-base mb-10 max-w-xl mx-auto">
                {% if lang == 'ru' %}Свяжитесь с нами для бесплатной консультации{% elif lang == 'en' %}Contact us for a free consultation{% else %}Bepul maslahat uchun biz bilan bog'laning{% endif %}
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="/contact" class="bg-[#f59e0b] hover:bg-[#d97706] text-white px-10 py-4 text-sm tracking-wider uppercase font-medium transition-colors">
                    {% if lang == 'ru' %}Связаться{% elif lang == 'en' %}Contact Us{% else %}Bog'lanish{% endif %}
                </a>
                <a href="tel:+998712000262" class="border border-white/30 text-white px-10 py-4 text-sm tracking-wider uppercase font-medium hover:bg-white/10 transition-colors">
                    71 200 02 62
                </a>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Section reveal animation
    const revealSections = document.querySelectorAll('.reveal-section');
    
    const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('revealed');
                revealObserver.unobserve(entry.target);
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    });
    
    revealSections.forEach(section => revealObserver.observe(section));
    
    // ===== CONFIGURATOR FUNCTIONALITY =====
    const config = {
        legs: { value: 'classic', label: 'Classic' },
        seat: { value: 'koja', label: "Ko'ja" },
        backrest: { value: 'soft', label: 'Yumshoq' },
        pattern: { value: 'plain', label: 'Oddiy' },
        material: { value: 'black', label: 'Qora' }
    };
    
    // Hotspot click handlers
    const hotspots = document.querySelectorAll('.config-hotspot');
    hotspots.forEach(hotspot => {
        hotspot.addEventListener('click', function() {
            const configType = this.dataset.config;
            const optionSection = document.querySelector(`.config-option[data-option="${configType}"]`);
            
            // Remove active from all hotspots
            hotspots.forEach(h => h.classList.remove('active'));
            this.classList.add('active');
            
            // Scroll to option section on mobile
            if (window.innerWidth < 1024 && optionSection) {
                optionSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            // Highlight the option section
            document.querySelectorAll('.config-option').forEach(opt => opt.classList.remove('ring-2', 'ring-[#f59e0b]'));
            if (optionSection) {
                optionSection.classList.add('ring-2', 'ring-[#f59e0b]');
                setTimeout(() => optionSection.classList.remove('ring-2', 'ring-[#f59e0b]'), 2000);
            }
        });
    });
    
    // Config button handlers
    const configBtns = document.querySelectorAll('.config-btn');
    configBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const option = this.closest('.config-option');
            const optionType = option.dataset.option;
            const value = this.dataset.value;
            const label = this.textContent.trim();
            
            // Update active state
            option.querySelectorAll('.config-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Update config
            config[optionType] = { value, label };
            
            // Update label
            option.querySelector('.config-selected-label').textContent = label;
            
            // Update summary
            updateSummary();
        });
    });
    
    // Color swatch handlers
    const colorBtns = document.querySelectorAll('.config-color');
    colorBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const option = this.closest('.config-option');
            const optionType = option.dataset.option;
            const value = this.dataset.value;
            const label = this.dataset.label;
            
            // Update active state
            option.querySelectorAll('.config-color').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Update config
            config[optionType] = { value, label };
            
            // Update label
            option.querySelector('.config-selected-label').textContent = label;
            
            // Update summary
            updateSummary();
        });
    });
    
    function updateSummary() {
        document.getElementById('summary-legs').textContent = config.legs.label;
        document.getElementById('summary-seat').textContent = config.seat.label;
        document.getElementById('summary-backrest').textContent = config.backrest.label;
        document.getElementById('summary-pattern').textContent = config.pattern.label;
        document.getElementById('summary-material').textContent = config.material.label;
    }
    
    // Bottom Sheet Functions
    const bottomSheet = document.getElementById('bottom-sheet');
    const bottomSheetOverlay = document.getElementById('bottom-sheet-overlay');
    const closeBottomSheetBtn = document.getElementById('close-bottom-sheet');
    const orderForm = document.getElementById('order-form');
    const orderBtn = document.getElementById('config-order-btn');
    
    function openBottomSheet() {
        // Update form with current config
        document.getElementById('form-legs').textContent = config.legs.label;
        document.getElementById('form-seat').textContent = config.seat.label;
        document.getElementById('form-backrest').textContent = config.backrest.label;
        document.getElementById('form-pattern').textContent = config.pattern.label;
        document.getElementById('form-material').textContent = config.material.label;
        
        // Show bottom sheet
        bottomSheet.classList.add('active');
        bottomSheetOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    function closeBottomSheet() {
        bottomSheet.classList.remove('active');
        bottomSheetOverlay.classList.remove('active');
        document.body.style.overflow = '';
        if (orderForm) orderForm.reset();
    }
    
    // Order button handler - opens bottom sheet
    if (orderBtn) {
        orderBtn.addEventListener('click', function(e) {
            e.preventDefault();
            openBottomSheet();
        });
    }
    
    // Close bottom sheet handlers
    if (closeBottomSheetBtn) {
        closeBottomSheetBtn.addEventListener('click', closeBottomSheet);
    }
    
    if (bottomSheetOverlay) {
        bottomSheetOverlay.addEventListener('click', closeBottomSheet);
    }
    
    // Form submit handler
    if (orderForm) {
        orderForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('order-name').value.trim();
            const phone = document.getElementById('order-phone').value.trim();
            const message = document.getElementById('order-message').value.trim();
            
            if (!name || !phone) {
                alert('{% if lang == "ru" %}Пожалуйста, заполните все обязательные поля{% elif lang == "en" %}Please fill in all required fields{% else %}Iltimos, barcha majburiy maydonlarni to\'ldiring{% endif %}');
                return;
            }
            
            const submitBtn = document.getElementById('submit-order-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '{% if lang == "ru" %}Отправка...{% elif lang == "en" %}Sending...{% else %}Yuborilmoqda...{% endif %}';
            submitBtn.disabled = true;
            
            // API'ga yuborish
            fetch('/api/custom-order', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                },
                body: JSON.stringify({
                    legs: config.legs.label,
                    seat: config.seat.label,
                    backrest: config.backrest.label,
                    pattern: config.pattern.label,
                    material: config.material.label,
                    name: name,
                    phone: phone,
                    message: message
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('{% if lang == "ru" %}Спасибо! Ваш заказ принят. Мы свяжемся с вами в ближайшее время.{% elif lang == "en" %}Thank you! Your order has been received. We will contact you soon.{% else %}Rahmat! Buyurtmangiz qabul qilindi. Tez orada siz bilan bog\'lanamiz.{% endif %}');
                    closeBottomSheet();
                } else {
                    alert(data.message || '{% if lang == "ru" %}Произошла ошибка. Попробуйте еще раз.{% elif lang == "en" %}An error occurred. Please try again.{% else %}Xatolik yuz berdi. Qayta urinib ko\'ring.{% endif %}');
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('{% if lang == "ru" %}Произошла ошибка. Попробуйте еще раз.{% elif lang == "en" %}An error occurred. Please try again.{% else %}Xatolik yuz berdi. Qayta urinib ko\'ring.{% endif %}');
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            });
        });
    }
    
    // Add to cart functionality
    document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
        btn.addEventListener('click', async function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const productId = this.dataset.productId;
            const button = this;
            const originalHTML = button.innerHTML;
            
            button.innerHTML = '<svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="2" stroke-dasharray="32" stroke-dashoffset="32"/></svg>';
            button.disabled = true;
            
            try {
                const formData = new FormData();
                formData.append('quantity', '1');
                
                const response = await fetch(`/cart/add/${productId}`, {
                    method: 'POST',
                    headers: { 'X-Requested-With': 'XMLHttpRequest' },
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Update cart badge
                    document.querySelectorAll('.cart-badge').forEach(badge => {
                        badge.textContent = data.cart_count;
                    });
                    
                    // Show success state
                    button.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>';
                    button.classList.remove('bg-[#1a1a2e]');
                    button.classList.add('bg-green-600');
                    
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.classList.add('bg-[#1a1a2e]');
                        button.classList.remove('bg-green-600');
                        button.disabled = false;
                    }, 2000);
                } else {
                    button.innerHTML = originalHTML;
                    button.disabled = false;
                    alert(data.message || 'Xatolik yuz berdi');
                }
            } catch (error) {
                console.error('Error:', error);
                button.innerHTML = originalHTML;
                button.disabled = false;
                alert('Xatolik yuz berdi. Iltimos, qayta urinib ko\'ring.');
            }
        });
    });
});
</script>
{% endblock %}
