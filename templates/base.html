<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Furni Glass - Premium Mebel{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        :root {
            --color-primary: #1a1a2e;
            --color-accent: #c9a96e;
            --font-display: 'Cormorant Garamond', serif;
            --font-body: 'Inter', sans-serif;
        }
        
        body { 
            font-family: var(--font-body);
            font-weight: 400;
        }
        
        h1, h2, h3, .font-display {
            font-family: var(--font-display);
        }
        
        /* Header styles */
        .site-header {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .site-header.scrolled {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            box-shadow: 0 1px 0 rgba(0,0,0,0.06);
        }
        
        .header-hidden {
            transform: translateY(-100%);
        }
        
        .nav-link {
            font-family: var(--font-body);
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 0.02em;
            text-transform: uppercase;
            color: #1a1a2e;
            position: relative;
            padding: 8px 0;
            transition: color 0.2s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--color-accent);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--color-accent);
        }
        
        /* Mobile nav */
        .mobile-nav-link {
            font-family: var(--font-display);
            font-size: 28px;
            font-weight: 500;
            color: #1a1a2e;
            transition: color 0.2s ease;
        }
        
        .mobile-nav-link:hover {
            color: var(--color-accent);
        }
        
        /* Bottom nav active states */
        .bottom-nav-item.active {
            color: #1a1a2e;
        }
        
        .bottom-nav-item:not(.active) {
            color: #9ca3af;
        }
        
        .bottom-nav-item img {
            transition: all 0.3s ease;
            filter: grayscale(100%) opacity(0.5);
        }
        
        .bottom-nav-item.active img {
            filter: grayscale(0%) opacity(1);
        }
        
        /* Search Modal */
        .search-modal {
            backdrop-filter: blur(8px);
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }
        
        .animate-slide-in {
            animation: slideIn 0.4s ease-out;
        }
        
        /* Loading Screen */
        .loading-screen {
            transition: opacity 0.8s ease-out;
        }
        
        .loading-screen.hidden {
            display: none;
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-white pt-[70px] md:pt-[80px] pb-16 md:pb-0">
    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-white z-[100] flex items-center justify-center loading-screen">
        <img src="/uploads/designs/Frame 3.png" alt="Loading" class="w-32 h-32 md:w-40 md:h-40 object-contain">
    </div>
    <!-- Header -->
    <header id="main-header" class="site-header fixed top-0 left-0 right-0 z-50 border-b border-gray-100 transition-transform duration-300">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="flex items-center justify-between h-[70px] md:h-[80px]">
                <!-- Left: Logo -->
                <a href="/" class="flex-shrink-0">
                    <img src="/uploads/designs/logo.png" alt="Furni Glass" class="h-8 md:h-9">
                </a>
                
                <!-- Center: Main Navigation (Desktop) -->
                <nav class="hidden lg:flex items-center gap-8">
                    <a href="/products" class="nav-link {% if request.endpoint == 'products' %}active{% endif %}">
                        {{ T.nav.products[lang] }}
                    </a>
                    <a href="/collections" class="nav-link {% if request.endpoint == 'collections' %}active{% endif %}">
                        {% if lang == 'ru' %}Коллекции{% elif lang == 'en' %}Collections{% else %}Kolleksiyalar{% endif %}
                    </a>
                    <a href="/portfolio" class="nav-link {% if request.endpoint == 'portfolio' %}active{% endif %}">
                        Portfolio
                    </a>
                    <a href="/interior-design" class="nav-link {% if request.endpoint == 'interior_design' %}active{% endif %}">
                        {% if lang == 'ru' %}Дизайн{% elif lang == 'en' %}Design{% else %}Dizayn{% endif %}
                    </a>
                    <a href="/contact" class="nav-link {% if request.endpoint == 'contact' %}active{% endif %}">
                        {{ T.nav.contact[lang] }}
                    </a>
                </nav>
                
                <!-- Right: Actions -->
                <div class="flex items-center gap-3 md:gap-5">
                    <!-- Location Button -->
                    <a href="/stores" class="p-2 text-[#1a1a2e] hover:text-[#c9a96e] transition">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"/>
                        </svg>
                    </a>
                    
                    <!-- Search Button -->
                    <button class="p-2 text-[#1a1a2e] hover:text-[#c9a96e] transition" id="search-btn">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                            <circle cx="11" cy="11" r="7"/>
                            <path d="m21 21-4.35-4.35" stroke-linecap="round"/>
                        </svg>
                    </button>
                    
                    <!-- Language (Desktop) -->
                    <div class="hidden md:block relative" id="lang-dropdown">
                        <button class="flex items-center gap-1.5 p-2 text-[#1a1a2e] hover:text-[#c9a96e] transition text-xs font-medium uppercase tracking-wide" id="lang-btn">
                            {{ lang }}
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="m6 9 6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <div id="lang-menu" class="hidden absolute right-0 top-full mt-2 bg-white border border-gray-100 shadow-lg py-1 min-w-[120px] z-50">
                            <a href="/set-language/uz" class="block px-4 py-2 text-sm hover:bg-gray-50 {% if lang == 'uz' %}text-[#c9a96e]{% else %}text-gray-700{% endif %}">O'zbekcha</a>
                            <a href="/set-language/ru" class="block px-4 py-2 text-sm hover:bg-gray-50 {% if lang == 'ru' %}text-[#c9a96e]{% else %}text-gray-700{% endif %}">Русский</a>
                            <a href="/set-language/en" class="block px-4 py-2 text-sm hover:bg-gray-50 {% if lang == 'en' %}text-[#c9a96e]{% else %}text-gray-700{% endif %}">English</a>
                        </div>
                    </div>
                    
                    <!-- Cart -->
                    <a href="/cart" class="p-2 text-[#1a1a2e] hover:text-[#c9a96e] transition relative">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                            <path d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        {% if cart_count > 0 %}
                        <span class="absolute -top-0.5 -right-0.5 bg-[#c9a96e] text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-medium cart-badge">{{ cart_count }}</span>
                        {% endif %}
                    </a>
                    
                    <!-- Menu Button (Desktop & Mobile) -->
                    <button class="p-2 text-[#1a1a2e] hover:text-[#c9a96e] transition" id="menu-btn">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Full Screen Menu -->
    <div class="fixed inset-0 bg-white z-[60] hidden" id="full-menu">
        <div class="h-full flex flex-col">
            <!-- Menu Header -->
            <div class="flex items-center justify-between px-4 lg:px-8 h-[70px] md:h-[80px] border-b border-gray-100">
                <a href="/" class="flex-shrink-0">
                    <img src="/uploads/designs/logo.png" alt="Furni Glass" class="h-8 md:h-9">
                </a>
                <button class="p-2 text-[#1a1a2e] hover:text-[#c9a96e] transition" id="close-menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <!-- Menu Content -->
            <div class="flex-1 overflow-y-auto">
                <div class="container mx-auto px-4 lg:px-8 py-8 lg:py-12">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-16">
                        <!-- Main Navigation -->
                        <div class="lg:col-span-2">
                            <nav class="space-y-4 lg:space-y-6">
                                <a href="/" class="mobile-nav-link block">{{ T.nav.home[lang] }}</a>
                                <a href="/products" class="mobile-nav-link block">{{ T.nav.products[lang] }}</a>
                                <a href="/collections" class="mobile-nav-link block">{% if lang == 'ru' %}Коллекции{% elif lang == 'en' %}Collections{% else %}Kolleksiyalar{% endif %}</a>
                                <a href="/portfolio" class="mobile-nav-link block">Portfolio</a>
                                <a href="/interior-design" class="mobile-nav-link block">{% if lang == 'ru' %}Дизайн интерьера{% elif lang == 'en' %}Interior Design{% else %}Interer Dizayn{% endif %}</a>
                                <a href="/about" class="mobile-nav-link block">{{ T.nav.about[lang] }}</a>
                                <a href="/contact" class="mobile-nav-link block">{{ T.nav.contact[lang] }}</a>
                            </nav>
                        </div>
                        
                        <!-- Secondary Links -->
                        <div class="border-t lg:border-t-0 lg:border-l border-gray-100 pt-8 lg:pt-0 lg:pl-16">
                            <p class="text-xs font-medium uppercase tracking-wider text-gray-400 mb-6">{% if lang == 'ru' %}Другие страницы{% elif lang == 'en' %}Other Pages{% else %}Boshqa sahifalar{% endif %}</p>
                            <nav class="space-y-4">
                                <a href="/services" class="block text-gray-600 hover:text-[#1a1a2e] transition">{{ T.nav.services[lang] }}</a>
                                <a href="/why-us" class="block text-gray-600 hover:text-[#1a1a2e] transition">{{ T.nav.why_us[lang] }}</a>
                                <a href="/faq" class="block text-gray-600 hover:text-[#1a1a2e] transition">FAQ</a>
                                <a href="/team" class="block text-gray-600 hover:text-[#1a1a2e] transition">{{ T.nav.team[lang] }}</a>
                                <a href="/gallery" class="block text-gray-600 hover:text-[#1a1a2e] transition">{{ T.nav.gallery[lang] }}</a>
                                <a href="/order" class="block text-gray-600 hover:text-[#1a1a2e] transition">{{ T.nav.order[lang] }}</a>
                            </nav>
                            
                            <!-- Language Selector -->
                            <div class="mt-8 pt-8 border-t border-gray-100 lg:hidden">
                                <p class="text-xs font-medium uppercase tracking-wider text-gray-400 mb-4">{{ T.nav.language[lang] }}</p>
                                <div class="flex gap-3">
                                    <a href="/set-language/uz" class="px-4 py-2 text-sm border {% if lang == 'uz' %}border-[#1a1a2e] bg-[#1a1a2e] text-white{% else %}border-gray-200 text-gray-600 hover:border-gray-400{% endif %} transition">UZ</a>
                                    <a href="/set-language/ru" class="px-4 py-2 text-sm border {% if lang == 'ru' %}border-[#1a1a2e] bg-[#1a1a2e] text-white{% else %}border-gray-200 text-gray-600 hover:border-gray-400{% endif %} transition">RU</a>
                                    <a href="/set-language/en" class="px-4 py-2 text-sm border {% if lang == 'en' %}border-[#1a1a2e] bg-[#1a1a2e] text-white{% else %}border-gray-200 text-gray-600 hover:border-gray-400{% endif %} transition">EN</a>
                                </div>
                            </div>
                            
                            <!-- Contact Info -->
                            <div class="mt-8 pt-8 border-t border-gray-100">
                                <p class="text-xs font-medium uppercase tracking-wider text-gray-400 mb-4">{{ T.nav.contact[lang] }}</p>
                                <a href="tel:+998901234567" class="block text-[#1a1a2e] font-medium mb-2">+998 90 123 45 67</a>
                                <a href="mailto:info@furniglass.uz" class="block text-gray-600 text-sm">info@furniglass.uz</a>
                                
                                <div class="flex gap-3 mt-6">
                                    <a href="#" class="w-10 h-10 border border-gray-200 flex items-center justify-center text-gray-600 hover:border-[#1a1a2e] hover:text-[#1a1a2e] transition">
                                        <i class="fab fa-instagram"></i>
                                    </a>
                                    <a href="#" class="w-10 h-10 border border-gray-200 flex items-center justify-center text-gray-600 hover:border-[#1a1a2e] hover:text-[#1a1a2e] transition">
                                        <i class="fab fa-telegram-plane"></i>
                                    </a>
                                    <a href="#" class="w-10 h-10 border border-gray-200 flex items-center justify-center text-gray-600 hover:border-[#1a1a2e] hover:text-[#1a1a2e] transition">
                                        <i class="fab fa-facebook-f"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-50">
        <div class="flex items-center justify-around h-14">
            <a href="/" class="bottom-nav-item flex flex-col items-center justify-center py-1.5 {% if request.endpoint == 'index' %}active{% endif %}">
                <svg class="w-5 h-5 mb-0.5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="text-[10px]">{{ T.nav.home[lang] }}</span>
            </a>
            <a href="/products" class="bottom-nav-item flex flex-col items-center justify-center py-1.5 {% if request.endpoint == 'products' %}active{% endif %}">
                <svg class="w-5 h-5 mb-0.5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="text-[10px]">{{ T.nav.products[lang] }}</span>
            </a>
            <a href="/cart" class="bottom-nav-item flex flex-col items-center justify-center py-1.5 relative {% if request.endpoint == 'cart' %}active{% endif %}">
                <div class="relative">
                    <svg class="w-5 h-5 mb-0.5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {% if cart_count > 0 %}
                    <span class="absolute -top-1.5 -right-1.5 bg-[#c9a96e] text-white text-[9px] w-3.5 h-3.5 flex items-center justify-center rounded-full cart-badge">{{ cart_count }}</span>
                    {% endif %}
                </div>
                <span class="text-[10px]">{{ T.nav.cart[lang] }}</span>
            </a>
            <a href="/portfolio" class="bottom-nav-item flex flex-col items-center justify-center py-1.5 {% if request.endpoint == 'portfolio' %}active{% endif %}">
                <svg class="w-5 h-5 mb-0.5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="text-[10px]">Portfolio</span>
            </a>
            <a href="/contact" class="bottom-nav-item flex flex-col items-center justify-center py-1.5 {% if request.endpoint == 'contact' %}active{% endif %}">
                <svg class="w-5 h-5 mb-0.5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="text-[10px]">{{ T.nav.contact[lang] }}</span>
            </a>
        </div>
    </nav>

    <!-- Search Modal -->
    <div id="search-modal" class="fixed inset-0 z-[70] hidden search-modal">
        <div class="absolute inset-0 bg-black/30" id="search-overlay"></div>
        <div class="absolute top-0 left-0 right-0 bg-white shadow-xl">
            <div class="container mx-auto px-4 lg:px-8 py-6">
                <div class="relative">
                    <input type="text" 
                           id="search-input" 
                           placeholder="{% if lang == 'ru' %}Что вы ищете?{% elif lang == 'en' %}What are you looking for?{% else %}Nima qidiryapsiz?{% endif %}" 
                           class="w-full py-4 text-xl font-light border-b-2 border-gray-200 focus:border-[#1a1a2e] outline-none bg-transparent pr-12"
                           style="font-family: var(--font-display);"
                           autocomplete="off">
                    <button id="close-search" class="absolute right-0 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                            <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                
                <div id="search-results" class="mt-6 max-h-[60vh] overflow-y-auto">
                    <div id="search-loading" class="hidden text-center py-8">
                        <div class="inline-block w-6 h-6 border-2 border-[#1a1a2e] border-t-transparent rounded-full animate-spin"></div>
                    </div>
                    <div id="search-empty" class="hidden text-center py-8 text-gray-500">
                        {% if lang == 'ru' %}Ничего не найдено{% elif lang == 'en' %}Nothing found{% else %}Hech narsa topilmadi{% endif %}
                    </div>
                    <div id="search-content"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mx-auto px-4 mt-4">
                {% for category, message in messages %}
                    <div class="p-4 mb-4 {% if category == 'error' %}bg-red-50 text-red-800 border-l-4 border-red-500{% else %}bg-green-50 text-green-800 border-l-4 border-green-500{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    {% block content %}{% endblock %}

    <!-- Footer -->
    <footer class="bg-[#1a1a2e] text-white mt-0 mb-14 md:mb-0">
        <div class="container mx-auto px-4 lg:px-8">
            <!-- Main Footer -->
            <div class="py-16 lg:py-20 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 lg:gap-12">
                <!-- Brand -->
                <div>
                    <img src="/uploads/designs/Logo-white.png" alt="Furni Glass" class="h-8 mb-6">
                    <p class="text-white/50 text-sm leading-relaxed mb-6">
                        {{ T.footer.description[lang] }}
                    </p>
                    <div class="flex gap-3">
                        <a href="#" class="w-9 h-9 border border-white/20 flex items-center justify-center text-white/60 hover:border-[#c9a96e] hover:text-[#c9a96e] transition">
                            <i class="fab fa-instagram text-sm"></i>
                        </a>
                        <a href="#" class="w-9 h-9 border border-white/20 flex items-center justify-center text-white/60 hover:border-[#c9a96e] hover:text-[#c9a96e] transition">
                            <i class="fab fa-telegram-plane text-sm"></i>
                        </a>
                        <a href="#" class="w-9 h-9 border border-white/20 flex items-center justify-center text-white/60 hover:border-[#c9a96e] hover:text-[#c9a96e] transition">
                            <i class="fab fa-facebook-f text-sm"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h4 class="text-xs font-medium uppercase tracking-wider mb-6">{{ T.footer.quick_links[lang] }}</h4>
                    <ul class="space-y-3">
                        <li><a href="/products" class="text-white/50 hover:text-[#c9a96e] text-sm transition">{{ T.nav.products[lang] }}</a></li>
                        <li><a href="/collections" class="text-white/50 hover:text-[#c9a96e] text-sm transition">{% if lang == 'ru' %}Коллекции{% elif lang == 'en' %}Collections{% else %}Kolleksiyalar{% endif %}</a></li>
                        <li><a href="/portfolio" class="text-white/50 hover:text-[#c9a96e] text-sm transition">Portfolio</a></li>
                        <li><a href="/about" class="text-white/50 hover:text-[#c9a96e] text-sm transition">{{ T.nav.about[lang] }}</a></li>
                        <li><a href="/faq" class="text-white/50 hover:text-[#c9a96e] text-sm transition">FAQ</a></li>
                    </ul>
                </div>
                
                <!-- Services -->
                <div>
                    <h4 class="text-xs font-medium uppercase tracking-wider mb-6">{{ T.footer.our_services[lang] }}</h4>
                    <ul class="space-y-3">
                        <li><a href="/interior-design" class="text-white/50 hover:text-[#c9a96e] text-sm transition">{% if lang == 'ru' %}Дизайн интерьера{% elif lang == 'en' %}Interior Design{% else %}Interer dizayn{% endif %}</a></li>
                        <li><a href="/services" class="text-white/50 hover:text-[#c9a96e] text-sm transition">{% if lang == 'ru' %}3D Дизайн{% elif lang == 'en' %}3D Design{% else %}3D Dizayn{% endif %}</a></li>
                        <li><a href="/order" class="text-white/50 hover:text-[#c9a96e] text-sm transition">{% if lang == 'ru' %}Индивидуальный заказ{% elif lang == 'en' %}Custom Order{% else %}Maxsus buyurtma{% endif %}</a></li>
                        <li><a href="/services" class="text-white/50 hover:text-[#c9a96e] text-sm transition">{% if lang == 'ru' %}Доставка{% elif lang == 'en' %}Delivery{% else %}Yetkazib berish{% endif %}</a></li>
                    </ul>
                </div>
                
                <!-- Contact -->
                <div>
                    <h4 class="text-xs font-medium uppercase tracking-wider mb-6">{{ T.footer.contact_info[lang] }}</h4>
                    <ul class="space-y-4">
                        <li>
                            <a href="tel:+998901234567" class="flex items-center gap-3 text-white/50 hover:text-[#c9a96e] text-sm transition">
                                <i class="fas fa-phone text-xs"></i>
                                +998 90 123 45 67
                            </a>
                        </li>
                        <li>
                            <a href="mailto:info@furniglass.uz" class="flex items-center gap-3 text-white/50 hover:text-[#c9a96e] text-sm transition">
                                <i class="fas fa-envelope text-xs"></i>
                                info@furniglass.uz
                            </a>
                        </li>
                        <li class="flex items-start gap-3 text-white/50 text-sm">
                            <i class="fas fa-map-marker-alt text-xs mt-1"></i>
                            <span>Toshkent, Yunusobod tumani</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Bottom Bar -->
            <div class="border-t border-white/10 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                    <p class="text-white/30 text-sm">© 2025 Furni Glass. {{ T.footer.copyright[lang] }}</p>
                    <div class="flex gap-6">
                        <a href="#" class="text-white/30 hover:text-white/60 text-sm transition">{{ T.footer.terms[lang] }}</a>
                        <a href="#" class="text-white/30 hover:text-white/60 text-sm transition">{{ T.footer.privacy[lang] }}</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Loading Screen - faqat birinchi marta kirganda
        (function() {
            const loadingScreen = document.getElementById('loading-screen');
            const hasVisited = sessionStorage.getItem('hasVisited');
            
            if (hasVisited) {
                // Agar oldin kirgan bo'lsa, loading screen'ni ko'rsatma
                loadingScreen.classList.add('hidden');
            } else {
                // Birinchi marta kirgan bo'lsa
                sessionStorage.setItem('hasVisited', 'true');
                
                // 2.5 soniyadan keyin fade out
                setTimeout(() => {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.classList.add('hidden');
                    }, 800); // fade out animation vaqti
                }, 900);
            }
        })();
        
        // Header scroll effect
        const header = document.getElementById('main-header');
        let lastScrollY = window.scrollY;
        let scrollDelta = 0;
        const THRESHOLD = 100;
        
        window.addEventListener('scroll', () => {
            const currentScrollY = window.scrollY;
            
            if (currentScrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
            
            if (currentScrollY > lastScrollY && currentScrollY > 200) {
                scrollDelta += currentScrollY - lastScrollY;
                if (scrollDelta > THRESHOLD) {
                    header.classList.add('header-hidden');
                }
            } else {
                scrollDelta = 0;
                header.classList.remove('header-hidden');
            }
            
            lastScrollY = currentScrollY;
        });

        // Full menu
        const menuBtn = document.getElementById('menu-btn');
        const fullMenu = document.getElementById('full-menu');
        const closeMenu = document.getElementById('close-menu');
        
        menuBtn?.addEventListener('click', () => {
            fullMenu.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        });
        
        closeMenu?.addEventListener('click', () => {
            fullMenu.classList.add('hidden');
            document.body.style.overflow = '';
        });
        
        // Close menu when clicking on links
        fullMenu?.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                fullMenu.classList.add('hidden');
                document.body.style.overflow = '';
            });
        });

        // Language dropdown
        const langBtn = document.getElementById('lang-btn');
        const langMenu = document.getElementById('lang-menu');
        
        langBtn?.addEventListener('click', (e) => {
            e.stopPropagation();
            langMenu.classList.toggle('hidden');
        });
        
        document.addEventListener('click', () => {
            langMenu?.classList.add('hidden');
        });

        // Search functionality
        const searchModal = document.getElementById('search-modal');
        const searchBtn = document.getElementById('search-btn');
        const closeSearch = document.getElementById('close-search');
        const searchOverlay = document.getElementById('search-overlay');
        const searchInput = document.getElementById('search-input');
        const searchContent = document.getElementById('search-content');
        const searchLoading = document.getElementById('search-loading');
        const searchEmpty = document.getElementById('search-empty');
        
        let searchTimeout = null;
        
        searchBtn?.addEventListener('click', () => {
            searchModal.classList.remove('hidden');
            setTimeout(() => searchInput.focus(), 100);
        });
        
        const closeSearchModal = () => {
            searchModal.classList.add('hidden');
            searchInput.value = '';
            searchContent.innerHTML = '';
            searchLoading.classList.add('hidden');
            searchEmpty.classList.add('hidden');
        };
        
        closeSearch?.addEventListener('click', closeSearchModal);
        searchOverlay?.addEventListener('click', closeSearchModal);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeSearchModal();
        });
        
        searchInput?.addEventListener('input', function() {
            const query = this.value.trim();
            if (searchTimeout) clearTimeout(searchTimeout);
            
            if (query.length < 2) {
                searchContent.innerHTML = '';
                searchLoading.classList.add('hidden');
                searchEmpty.classList.add('hidden');
                return;
            }
            
            searchLoading.classList.remove('hidden');
            searchEmpty.classList.add('hidden');
            searchContent.innerHTML = '';
            
            searchTimeout = setTimeout(async () => {
                try {
                    const response = await fetch(`/search?q=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    
                    searchLoading.classList.add('hidden');
                    
                    if (!data.products.length && !data.categories.length) {
                        searchEmpty.classList.remove('hidden');
                        return;
                    }
                    
                    let html = '';
                    if (data.products.length) {
                        html += '<div class="mb-6"><p class="text-xs uppercase tracking-wider text-gray-400 mb-3">{% if lang == "ru" %}Продукты{% elif lang == "en" %}Products{% else %}Mahsulotlar{% endif %}</p><div class="space-y-2">';
                        data.products.forEach(p => {
                            html += `<a href="${p.url}" class="flex items-center gap-4 p-3 hover:bg-gray-50 transition">
                                <div class="w-14 h-14 bg-gray-100 flex-shrink-0">${p.image ? `<img src="/uploads/${p.image}" class="w-full h-full object-contain">` : ''}</div>
                                <div class="flex-1"><p class="font-medium text-[#1a1a2e]">${p.name}</p><p class="text-sm text-gray-500">${new Intl.NumberFormat('uz-UZ').format(p.price)} so'm</p></div>
                            </a>`;
                        });
                        html += '</div></div>';
                    }
                    searchContent.innerHTML = html;
                } catch (e) {
                    searchLoading.classList.add('hidden');
                    searchEmpty.classList.remove('hidden');
                }
            }, 300);
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
