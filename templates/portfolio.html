{% extends "base.html" %}

{% block title %}{{ T.nav.portfolio[lang] }} - Furni Glass{% endblock %}

{% block extra_css %}
<style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap');
    
    .hero-title {
        font-family: 'Playfair Display', serif;
    }
    
    .gradient-text {
        background: linear-gradient(135deg, #232339 0%, #000000 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .portfolio-card {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .portfolio-card:hover {
        transform: translateY(-12px);
    }
    
    .portfolio-card:hover .portfolio-overlay {
        opacity: 1;
    }
    
    .portfolio-card:hover .portfolio-content {
        transform: translateY(0);
    }
    
    .portfolio-overlay {
        opacity: 0;
        transition: all 0.4s ease;
    }
    
    .portfolio-content {
        transform: translateY(20px);
        transition: all 0.4s ease;
    }
    
    .filter-btn {
        transition: all 0.3s ease;
    }
    
    .filter-btn.active {
        background: #232339;
        color: white;
    }
    
    .masonry-grid {
        column-count: 3;
        column-gap: 24px;
    }
    
    @media (max-width: 1024px) {
        .masonry-grid {
            column-count: 2;
        }
    }
    
    @media (max-width: 640px) {
        .masonry-grid {
            column-count: 1;
        }
    }
    
    .masonry-item {
        break-inside: avoid;
        margin-bottom: 24px;
    }
    
    .lightbox {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.95);
        z-index: 100;
        align-items: center;
        justify-content: center;
    }
    
    .lightbox.active {
        display: flex;
    }
    
    /* Process Wave Connection */
    .process-container {
        position: relative;
        min-height: 500px;
        padding-bottom: 4rem;
    }
    
    .process-wave {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: none;
    }
    
    .process-wave svg {
        width: 100%;
        height: 100%;
        overflow: visible;
    }
    
    .process-step {
        position: relative;
        z-index: 2;
    }
    
    .process-card {
        position: relative;
        background: white;
        border-radius: 1rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        transition: all 0.3s ease;
    }
    
    .process-card:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        transform: translateY(-4px);
    }
    
    .process-number {
        position: absolute;
        bottom: -1.5rem;
        left: 50%;
        transform: translateX(-50%);
        width: 3rem;
        height: 3rem;
        background: #3B82F6;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.3);
        z-index: 3;
    }
    
    @media (max-width: 1024px) {
        .process-wave {
            display: none;
        }
        
        .process-container {
            min-height: auto;
            padding-bottom: 2rem;
        }
        
        .process-number {
            position: relative;
            bottom: auto;
            left: auto;
            transform: none;
            margin: 1.5rem auto 0;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative bg-gradient-to-br from-[#FAF9F6] via-[#F5F3EF] to-[#EDE9E3] py-20 lg:py-28 overflow-hidden">
    <div class="absolute inset-0 opacity-5">
        <div class="absolute top-0 right-0 w-96 h-96 bg-[#232339] rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-80 h-80 bg-[#000000] rounded-full blur-3xl"></div>
    </div>
    
    <div class="container mx-auto px-4 relative">
        <div class="max-w-4xl mx-auto text-center">
            <!-- Breadcrumb -->
            <div class="flex items-center justify-center gap-2 text-sm text-gray-500 mb-8">
                <a href="/" class="hover:text-[#232339] transition">Bosh sahifa</a>
                <i class="fas fa-chevron-right text-xs"></i>
                <span class="text-[#232339]">Portfolio</span>
            </div>
            
            <div class="inline-flex items-center gap-2 bg-[#232339]/10 text-[#232339] px-5 py-2.5 rounded-full text-sm font-medium mb-8">
                <i class="fas fa-images"></i>
                Bizning ishlarimiz
            </div>
            
            <h1 class="hero-title text-4xl md:text-5xl lg:text-6xl font-bold text-[#232339] leading-tight mb-8">
                Bajarilgan<br>
                <span class="gradient-text">Loyihalarimiz</span>
            </h1>
            
            <p class="text-gray-600 text-lg md:text-xl max-w-3xl mx-auto leading-relaxed">
                15 yil davomida biz minglab uy va ofislarni zamonaviy mebel bilan bezadik. 
                Mana ba'zi loyihalarimiz - har biri mijozlarimizning orzularini aks ettiradi.
            </p>
        </div>
    </div>
</section>

<!-- Stats -->
<section class="py-12 bg-[#232339]">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            <div class="text-center">
                <p class="text-4xl font-bold text-white mb-1">2500+</p>
                <p class="text-white/70">Bajarilgan loyihalar</p>
            </div>
            <div class="text-center">
                <p class="text-4xl font-bold text-white mb-1">500+</p>
                <p class="text-white/70">Oshxonalar</p>
            </div>
            <div class="text-center">
                <p class="text-4xl font-bold text-white mb-1">800+</p>
                <p class="text-white/70">Yotoqxonalar</p>
            </div>
            <div class="text-center">
                <p class="text-4xl font-bold text-white mb-1">300+</p>
                <p class="text-white/70">Ofislar</p>
            </div>
        </div>
    </div>
</section>

<!-- Filter & Portfolio Grid -->
<section class="py-20 lg:py-28 bg-[#FAF9F6]">
    <div class="container mx-auto px-4">
        <!-- Filters -->
        <div class="flex flex-wrap justify-center gap-3 mb-14">
            <a href="/portfolio" class="filter-btn px-6 py-3 rounded-full text-sm font-medium border border-gray-200 bg-white hover:bg-[#232339] hover:text-white hover:border-[#232339] {% if not request.args.get('room_type') %}active{% endif %}">
                Barchasi
            </a>
            <a href="/portfolio?room_type=Oshxona" class="filter-btn px-6 py-3 rounded-full text-sm font-medium border border-gray-200 bg-white hover:bg-[#232339] hover:text-white hover:border-[#232339] {% if request.args.get('room_type') == 'Oshxona' %}active{% endif %}">
                <i class="fas fa-utensils mr-2"></i>Oshxona
            </a>
            <a href="/portfolio?room_type=Yotoqxona" class="filter-btn px-6 py-3 rounded-full text-sm font-medium border border-gray-200 bg-white hover:bg-[#232339] hover:text-white hover:border-[#232339] {% if request.args.get('room_type') == 'Yotoqxona' %}active{% endif %}">
                <i class="fas fa-bed mr-2"></i>Yotoqxona
            </a>
            <a href="/portfolio?room_type=Zal" class="filter-btn px-6 py-3 rounded-full text-sm font-medium border border-gray-200 bg-white hover:bg-[#232339] hover:text-white hover:border-[#232339] {% if request.args.get('room_type') == 'Zal' %}active{% endif %}">
                <i class="fas fa-couch mr-2"></i>Zal
            </a>
            <a href="/portfolio?room_type=Bolalar" class="filter-btn px-6 py-3 rounded-full text-sm font-medium border border-gray-200 bg-white hover:bg-[#232339] hover:text-white hover:border-[#232339] {% if request.args.get('room_type') == 'Bolalar' %}active{% endif %}">
                <i class="fas fa-child mr-2"></i>Bolalar xonasi
            </a>
            <a href="/portfolio?room_type=Ofis" class="filter-btn px-6 py-3 rounded-full text-sm font-medium border border-gray-200 bg-white hover:bg-[#232339] hover:text-white hover:border-[#232339] {% if request.args.get('room_type') == 'Ofis' %}active{% endif %}">
                <i class="fas fa-briefcase mr-2"></i>Ofis
            </a>
            <a href="/portfolio?room_type=Koridor" class="filter-btn px-6 py-3 rounded-full text-sm font-medium border border-gray-200 bg-white hover:bg-[#232339] hover:text-white hover:border-[#232339] {% if request.args.get('room_type') == 'Koridor' %}active{% endif %}">
                <i class="fas fa-door-open mr-2"></i>Koridor
            </a>
    </div>
    
        <!-- Portfolio Grid -->
    {% if portfolios %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for portfolio in portfolios %}
            <div class="portfolio-card bg-white rounded-3xl overflow-hidden shadow-xl">
                <!-- Main Image -->
                <div class="relative aspect-[4/3] overflow-hidden">
                {% if portfolio.after_image %}
                    <img src="/uploads/{{ portfolio.after_image }}" alt="{{ portfolio.title_uz }}" class="w-full h-full object-cover">
                {% else %}
                    <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                        <i class="fas fa-image text-6xl text-gray-400"></i>
                    </div>
                {% endif %}
                    
                    <!-- Overlay -->
                    <div class="portfolio-overlay absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent flex items-end p-6">
                        <div class="portfolio-content text-white">
                            {% if portfolio.room_type_uz %}
                            <span class="inline-block bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium mb-3">
                                {{ portfolio.room_type_uz }}
                            </span>
                            {% endif %}
                            <h3 class="text-xl font-bold mb-2">{{ portfolio.title_uz }}</h3>
                        </div>
                    </div>
                    
                    <!-- Room Type Badge -->
                {% if portfolio.room_type_uz %}
                    <div class="absolute top-4 right-4 bg-[#232339] text-white px-3 py-1.5 rounded-full text-xs font-medium">
                    {{ portfolio.room_type_uz }}
                </div>
                {% endif %}
            </div>
                
                <!-- Content -->
            <div class="p-6">
                    <h3 class="text-lg font-bold text-[#232339] mb-3">{{ portfolio.title_uz }}</h3>
                    
                {% if portfolio.description_uz %}
                    <p class="text-gray-500 text-sm mb-4 line-clamp-2">{{ portfolio.description_uz }}</p>
                {% endif %}
                
                    <!-- Before/After if available -->
                {% if portfolio.before_image and portfolio.after_image %}
                    <div class="border-t border-gray-100 pt-4 mt-4">
                        <p class="text-xs font-medium text-gray-400 mb-3">Oldin va Keyin</p>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="relative rounded-xl overflow-hidden">
                                <img src="/uploads/{{ portfolio.before_image }}" alt="Oldin" class="w-full aspect-square object-cover">
                                <span class="absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded">Oldin</span>
                            </div>
                            <div class="relative rounded-xl overflow-hidden">
                                <img src="/uploads/{{ portfolio.after_image }}" alt="Keyin" class="w-full aspect-square object-cover">
                                <span class="absolute bottom-2 left-2 bg-[#232339] text-white text-xs px-2 py-1 rounded">Keyin</span>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <!-- Empty State -->
        <div class="bg-white rounded-3xl p-16 text-center max-w-lg mx-auto shadow-xl">
            <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-images text-gray-400 text-4xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-[#232339] mb-4">Loyihalar topilmadi</h3>
            <p class="text-gray-500 mb-8">Ushbu kategoriyada hozircha loyihalar mavjud emas. Boshqa kategoriyani tanlang.</p>
            <a href="/portfolio" class="inline-flex items-center gap-2 bg-[#232339] hover:bg-[#000000] text-white px-6 py-3 rounded-full font-medium transition">
                Barcha loyihalar
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Featured Projects -->
<section class="py-20 lg:py-28 bg-white">
    <div class="container mx-auto px-4">
        <div class="max-w-3xl mx-auto text-center mb-16">
            <div class="inline-flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-full text-sm font-medium mb-6">
                <i class="fas fa-star"></i>
                Eng yaxshi loyihalar
            </div>
            <h2 class="hero-title text-3xl md:text-4xl lg:text-5xl font-bold text-[#232339] mb-6">
                Biz Faxrlanadigan Loyihalar
            </h2>
            <p class="text-gray-600 text-lg">
                Eng murakkab va chiroyli loyihalarimizdan namunalar
            </p>
        </div>
        
        <!-- Featured Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Large Feature -->
            <div class="portfolio-card relative rounded-3xl overflow-hidden shadow-2xl h-[500px]">
                <img src="/uploads/designs/3.jpg" alt="Premium oshxona" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent flex items-end p-8">
                    <div class="text-white">
                        <span class="inline-block bg-amber-500 px-3 py-1 rounded-full text-xs font-bold mb-4">
                            <i class="fas fa-crown mr-1"></i> Premium
                        </span>
                        <h3 class="text-2xl font-bold mb-2">Zamonaviy Oshxona Loyihasi</h3>
                        <p class="text-white/70 mb-4">Mirzo Ulug'bek tumani, 45 m² oshxona</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="bg-white/20 px-3 py-1 rounded-full text-xs">MDF fasad</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full text-xs">Blum furnitura</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full text-xs">LED yoritish</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Two Smaller Features -->
            <div class="space-y-8">
                <div class="portfolio-card relative rounded-3xl overflow-hidden shadow-2xl h-[236px]">
                    <img src="/uploads/designs/3.jpg" alt="Klassik yotoqxona" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent flex items-end p-6">
                        <div class="text-white">
                            <span class="inline-block bg-#232339 px-3 py-1 rounded-full text-xs font-bold mb-3">
                                Klassik
                            </span>
                            <h3 class="text-xl font-bold mb-1">Klassik Yotoqxona</h3>
                            <p class="text-white/70 text-sm">Yunusobod, 30 m²</p>
                        </div>
                    </div>
                </div>
                
                <div class="portfolio-card relative rounded-3xl overflow-hidden shadow-2xl h-[236px]">
                    <img src="/uploads/designs/3.jpg" alt="Zamonaviy ofis" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent flex items-end p-6">
                        <div class="text-white">
                            <span class="inline-block bg-blue-500 px-3 py-1 rounded-full text-xs font-bold mb-3">
                                Korporativ
                            </span>
                            <h3 class="text-xl font-bold mb-1">IT Kompaniya Ofisi</h3>
                            <p class="text-white/70 text-sm">Minor massivi, 150 m²</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Our Process -->
<section class="py-20 lg:py-28 bg-white">
    <div class="container mx-auto px-4">
        <div class="max-w-3xl mx-auto text-center mb-16">
            <h2 class="hero-title text-3xl md:text-4xl font-bold text-[#232339] mb-6">
                {% if lang == 'ru' %}Процесс Проекта{% elif lang == 'en' %}Project Process{% else %}Loyiha Jarayoni{% endif %}
            </h2>
            <p class="text-gray-600 text-lg">
                {% if lang == 'ru' %}
                От идеи до готового проекта — посмотрите, как мы работаем
                {% elif lang == 'en' %}
                From idea to finished project — see how we work
                {% else %}
                Fikrdan tayyor loyihagacha - qanday ishlashimizni ko'ring
                {% endif %}
            </p>
        </div>
        
        <!-- Process Steps with Wave Connection -->
        <div class="max-w-6xl mx-auto relative process-container">
            <!-- Wave SVG Path -->
            <div class="process-wave hidden lg:block">
                <svg viewBox="0 0 1200 500" preserveAspectRatio="xMidYMid meet" style="overflow: visible;">
                    <!-- Wave path connecting the three cards -->
                    <path d="M 100 150 Q 300 250 500 150 T 900 150" 
                          stroke="#3B82F6" 
                          stroke-width="4" 
                          fill="none" 
                          stroke-dasharray="10,6" 
                          vector-effect="non-scaling-stroke"
                          style="stroke-linecap: round; stroke-linejoin: round;"/>
                </svg>
            </div>
            
            <!-- Process Cards -->
            <div class="relative grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-16 process-step">
                <!-- Step 1: Konsultatsiya -->
                <div class="relative">
                    <div class="process-card p-6">
                        <!-- Icon -->
                        <div class="w-14 h-14 bg-blue-50 rounded-xl flex items-center justify-center mb-4">
                            <i class="fas fa-comments text-blue-600 text-xl"></i>
                        </div>
                        
                        <!-- Title -->
                        <h4 class="text-lg font-bold text-[#232339] mb-2">
                            {% if lang == 'ru' %}Консультация{% elif lang == 'en' %}Consultation{% else %}Konsultatsiya{% endif %}
                        </h4>
                        
                        <!-- Description -->
                        <p class="text-gray-600 text-sm leading-relaxed">
                            {% if lang == 'ru' %}
                            Бесплатная консультация, помощь в выборе направления и дизайна
                            {% elif lang == 'en' %}
                            Free consultation, assistance in choosing direction and design
                            {% else %}
                            Bepul maslahat, yo'nalish va dizayn tanlashda yordam
                            {% endif %}
                        </p>
                    </div>
                    
                    <!-- Number Circle -->
                    <div class="process-number">
                        1
                    </div>
                </div>
                
                <!-- Step 2: O'lchov va Dizayn -->
                <div class="relative lg:mt-32">
                    <div class="process-card p-6">
                        <!-- Icon -->
                        <div class="w-14 h-14 bg-blue-50 rounded-xl flex items-center justify-center mb-4">
                            <i class="fas fa-file-alt text-blue-600 text-xl"></i>
                        </div>
                        
                        <!-- Title -->
                        <h4 class="text-lg font-bold text-[#232339] mb-2">
                            {% if lang == 'ru' %}Замер и Проект{% elif lang == 'en' %}Measurement & Design{% else %}O'lchov va Dizayn{% endif %}
                        </h4>
                        
                        <!-- Description -->
                        <p class="text-gray-600 text-sm leading-relaxed">
                            {% if lang == 'ru' %}
                            Помощь в подготовке всех документов и правильном оформлении проекта
                            {% elif lang == 'en' %}
                            Assistance in preparing all documents and proper project design
                            {% else %}
                            Barcha hujjatlarni tayyorlash va to'g'ri rasmiylashtirishda yordam
                            {% endif %}
                        </p>
                    </div>
                    
                    <!-- Number Circle -->
                    <div class="process-number">
                        2
                    </div>
                </div>
                
                <!-- Step 3: Ishlab Chiqarish va Yetkazish -->
                <div class="relative">
                    <div class="process-card p-6">
                        <!-- Icon -->
                        <div class="w-14 h-14 bg-blue-50 rounded-xl flex items-center justify-center mb-4">
                            <i class="fas fa-check-circle text-blue-600 text-xl"></i>
                        </div>
                        
                        <!-- Title -->
                        <h4 class="text-lg font-bold text-[#232339] mb-2">
                            {% if lang == 'ru' %}Производство и Доставка{% elif lang == 'en' %}Production & Delivery{% else %}Ishlab Chiqarish va Yetkazish{% endif %}
                        </h4>
                        
                        <!-- Description -->
                        <p class="text-gray-600 text-sm leading-relaxed">
                            {% if lang == 'ru' %}
                            Получение готового заказа, установка и подготовка к использованию
                            {% elif lang == 'en' %}
                            Receiving the finished order, installation and preparation for use
                            {% else %}
                            Tayyor buyurtmani olish, o'rnatish va foydalanishga tayyorgarlik
                            {% endif %}
                        </p>
                    </div>
                    
                    <!-- Number Circle -->
                    <div class="process-number">
                        3
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-20 lg:py-28 bg-gradient-to-br from-[#232339] to-[#000000] relative overflow-hidden">
    <div class="absolute inset-0 opacity-10">
        <div class="absolute top-0 left-0 w-96 h-96 bg-white rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 right-0 w-80 h-80 bg-white rounded-full blur-3xl"></div>
    </div>
    
    <div class="container mx-auto px-4 relative">
        <div class="max-w-3xl mx-auto text-center">
            <h2 class="hero-title text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6">
                Sizning Loyihangiz Keyingi Bo'lsin
            </h2>
            <p class="text-white/80 text-lg mb-10 max-w-xl mx-auto">
                Orzuingizdagi mebelni birga yaratamiz. Bepul maslahat va 3D dizayn uchun hoziroq bog'laning.
            </p>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="/order" class="inline-flex items-center justify-center gap-2 bg-white text-[#232339] px-8 py-4 rounded-full font-medium transition hover:shadow-xl hover:shadow-black/20 hover:scale-105">
                    <i class="fas fa-paper-plane"></i>
                    Loyiha Boshlash
                </a>
                <a href="/contact" class="inline-flex items-center justify-center gap-2 border-2 border-white text-white px-8 py-4 rounded-full font-medium transition hover:bg-white hover:text-[#232339]">
                    <i class="fas fa-phone"></i>
                    Bog'lanish
                </a>
            </div>
        </div>
</div>
</section>
{% endblock %}
